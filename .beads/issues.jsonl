{"id":"rust_agent_network_observer-152","title":"Implement session diff logic","description":"Deliverables:\n- DiffResult struct:\n  - new_domains: Vec\u003cString\u003e\n  - removed_domains: Vec\u003cString\u003e\n  - changed_domains: Vec\u003c(String, i64, i64)\u003e (domain, old_count, new_count)\n  - new_processes: Vec\u003cString\u003e\n  - provider_changes: HashMap\u003cProvider, (i64, i64)\u003e\n\n- compute_session_diff(old_run_id: \u0026str, new_run_id: \u0026str, threshold_pct: f64) -\u003e DiffResult:\n  - Query domain counts for each session\n  - Compute set differences\n  - Filter changes by threshold\n\n- CLI: rano diff --old \u003cid\u003e --new \u003cid\u003e [--threshold \u003cpct\u003e] [--json]\n- Pretty output: sections for each diff type\n- JSON output: DiffResult as JSON\n\n- Unit tests for diff computation\n- E2E test with seeded sessions","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-21T05:12:13.251408999Z","created_by":"ubuntu","updated_at":"2026-01-22T03:11:33.071836807Z","closed_at":"2026-01-22T03:11:33.071351032Z","close_reason":"done","dependencies":[{"issue_id":"rust_agent_network_observer-152","depends_on_id":"rust_agent_network_observer-1o5","type":"parent-child","created_at":"2026-01-21T05:12:13.269634692Z","created_by":"ubuntu"}]}
{"id":"rust_agent_network_observer-15l","title":"Add ancestry CLI flag and SQLite storage","description":"Deliverables:\n- CLI flag: --show-ancestry (default: false)\n- Config key: show_ancestry=true\n\n- Event output with ancestry:\n  Pretty: '2026-01-20T10:00:00Z | + connect | anthropic | zsh → tmux → claude (pid=1234) | ...'\n  JSON: add 'ancestry': ['zsh(100)', 'tmux(200)', 'claude(1234)']\n\n- SQLite schema update:\n  - Add 'ancestry_path' TEXT column to events table\n  - Store as comma-separated: 'zsh:100,tmux:200,claude:1234'\n  - Index on ancestry_path for queries\n\n- Report enhancement:\n  - Group by top-level parent (first in chain)\n  - Show: 'Spawned from zsh: 45 connections, tmux: 23 connections'","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-21T05:03:20.237572582Z","created_by":"ubuntu","updated_at":"2026-01-21T10:07:53.478986533Z","closed_at":"2026-01-21T10:07:53.478919266Z","close_reason":"done","dependencies":[{"issue_id":"rust_agent_network_observer-15l","depends_on_id":"rust_agent_network_observer-1ju","type":"parent-child","created_at":"2026-01-21T05:03:20.308039948Z","created_by":"ubuntu"},{"issue_id":"rust_agent_network_observer-15l","depends_on_id":"rust_agent_network_observer-vb7","type":"blocks","created_at":"2026-01-21T05:04:17.270912144Z","created_by":"ubuntu"}],"comments":[{"id":1,"issue_id":"rust_agent_network_observer-15l","author":"Dicklesworthstone","text":"Implemented --show-ancestry flag + config key (show_ancestry). Event output now includes ancestry chain (pretty) and JSON ancestry array. Added ancestry_path column/index to events and write path as comm:pid chain. Report now includes Spawned From section (top-level parent counts) and JSON ancestry_roots. Note: cargo test -q attempted but was blocked by concurrent cargo lock in shared env.","created_at":"2026-01-21T10:07:48Z"}]}
{"id":"rust_agent_network_observer-1gl","title":"Implement export subcommand","description":"Deliverables:\n- Add 'export' to Command enum\n- ExportArgs struct with all filter fields\n- parse_export_args() function\n\n- run_export() function:\n  1. Open SQLite (error if missing)\n  2. Build query with WHERE clause from filters\n  3. Stream rows to stdout in requested format\n  4. Handle Ctrl+C gracefully (don't corrupt output)\n\n- format_csv_row(row) function:\n  - Escape quotes by doubling\n  - Wrap fields with commas/quotes/newlines in quotes\n  - Join with comma, output CRLF\n\n- format_jsonl_row(row) function:\n  - Serialize row to JSON object\n  - Output with LF\n\n- Memory efficiency:\n  - Use SQLite row iteration, not collect()\n  - Flush stdout periodically\n\n- Error handling:\n  - Missing SQLite file: clear error message\n  - Empty result set: output header only (CSV) or nothing (JSONL)\n  - Invalid filter: exit with error before query","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-21T05:01:42.648931351Z","created_by":"ubuntu","updated_at":"2026-01-21T08:59:34.850375758Z","closed_at":"2026-01-21T08:59:34.850143029Z","close_reason":"done","dependencies":[{"issue_id":"rust_agent_network_observer-1gl","depends_on_id":"rust_agent_network_observer-1vz","type":"parent-child","created_at":"2026-01-21T05:01:42.684768291Z","created_by":"ubuntu"},{"issue_id":"rust_agent_network_observer-1gl","depends_on_id":"rust_agent_network_observer-2a6","type":"blocks","created_at":"2026-01-21T05:01:57.715021911Z","created_by":"ubuntu"}],"comments":[{"id":2,"issue_id":"rust_agent_network_observer-1gl","author":"Dicklesworthstone","text":"Implemented export subcommand in src/main.rs (CLI parsing, query builder, CSV/JSONL formatting, streaming + flush, Ctrl+C handling). Added unit tests for csv_escape/glob_to_sql_like/validate_fields. cargo test -q passed.","created_at":"2026-01-21T08:59:15Z"}]}
{"id":"rust_agent_network_observer-1i6","title":"Connection retry detection","description":"Purpose:\n- Detect and highlight reconnection patterns (same remote, repeated connect/close cycles)\n- Surface rate limiting, network issues, or bugs in AI clients\n\nUser impact:\n- See warning: '⚠ Retry pattern: 5 connections to api.anthropic.com:443 in 30s'\n- Identify problematic connection behavior without manual analysis\n- Correlate retries with provider responses\n\nFeatures:\n- Track connection events per (remote_ip, remote_port, pid)\n- Configurable threshold: --retry-threshold \u003cN\u003e (default 3)\n- Configurable window: --retry-window-ms \u003cN\u003e (default 60000)\n- Output retry warnings inline with events\n- Store retry_count in SQLite for analysis\n\nImplementation:\n- HashMap\u003c(IpAddr, u16, u32), Vec\u003cInstant\u003e\u003e for recent connections\n- On close event: check if count in window exceeds threshold\n- Prune old entries on check (sliding window)\n\nTesting:\n- Unit tests for retry detection logic\n- E2E script that simulates rapid reconnects\n- Verify warnings appear and SQLite has retry counts","status":"closed","priority":3,"issue_type":"feature","created_at":"2026-01-21T05:06:56.071844384Z","created_by":"ubuntu","updated_at":"2026-01-21T22:30:25.978010206Z","closed_at":"2026-01-21T22:30:25.977937749Z","close_reason":"done","dependencies":[{"issue_id":"rust_agent_network_observer-1i6","depends_on_id":"rust_agent_network_observer-3o1","type":"parent-child","created_at":"2026-01-21T05:06:56.101171213Z","created_by":"ubuntu"}]}
{"id":"rust_agent_network_observer-1jj","title":"Design alert system architecture","description":"Deliverables:\n- AlertConfig struct with all threshold fields\n- Decision on pattern matching library (regex vs glob vs both)\n- Define alert event structure for SQLite storage\n- Define alert output format (stderr, prefix, colors)\n- Decide on alert state tracking (cooldown to avoid spam)\n\nDesign questions to answer:\n1. Should alerts be per-connection or per-threshold-breach?\n2. How to handle alert cooldown (same alert within N seconds)?\n3. Should we track 'alert acknowledged' state?\n4. How do alerts interact with --json output mode?\n\nOutput:\n- Design doc in docs/alert-design.md\n- Updated schema proposal for events table","design":"Design decisions (pre-answered to speed implementation):\n1. Alerts should be per-connection (each matching event triggers alert, subject to cooldown)\n2. Cooldown: HashMap\u003cAlertType, Instant\u003e - skip alert if same type within cooldown_ms\n3. No 'acknowledged' state for v1 - keep it simple, user handles alerts\n4. JSON mode: alerts as JSON objects on stderr with alert:true field, same structure as events\n\nPattern matching approach:\n- Use glob for simple wildcards (most common case)\n- Allow regex with r: prefix for power users (e.g., 'r:.*evil.*')\n- Default to glob if no prefix","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-21T05:00:28.505557159Z","created_by":"ubuntu","updated_at":"2026-01-21T07:38:54.195422658Z","closed_at":"2026-01-21T07:38:54.195219435Z","close_reason":"done","dependencies":[{"issue_id":"rust_agent_network_observer-1jj","depends_on_id":"rust_agent_network_observer-2iu","type":"parent-child","created_at":"2026-01-21T05:00:28.527150866Z","created_by":"ubuntu"}]}
{"id":"rust_agent_network_observer-1ju","title":"Process ancestry chain display","description":"Purpose:\n- Show full process tree path for spawned AI processes\n- Enable understanding of multi-layer orchestration (shell → tmux → agent → claude)\n- Critical for debugging and auditing agent swarms\n\nUser impact:\n- 'rano --show-ancestry' displays: 'zsh(123) → tmux(456) → bash(789) → claude(1234)'\n- Users understand exactly how AI processes were spawned\n- Helps identify rogue or unexpected process spawning\n\nFeatures:\n- --show-ancestry flag: include ancestry in event output\n- Ancestry format: 'parent_comm(pid) → ... → current_comm(pid)'\n- Cache ancestry to avoid repeated /proc walks\n- Store ancestry_path in SQLite for historical queries\n- Report includes ancestry breakdown\n\nImplementation approach:\n- read_ancestry(pid) walks /proc/{pid}/stat PPID chain to init\n- Cache: HashMap\u003cpid, Vec\u003c(pid, String)\u003e\u003e with TTL\n- Ancestry invalidated if PID recycled (check comm matches)\n\nTesting:\n- Unit tests for ancestry chain parsing\n- E2E script with nested process tree (shell → script → rano)\n- Verify ancestry displayed correctly in output and stored in SQLite","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-21T05:02:18.765913116Z","created_by":"ubuntu","updated_at":"2026-01-21T11:04:31.933812417Z","closed_at":"2026-01-21T11:04:31.933767403Z","close_reason":"All child tasks complete: ancestry chain reading (bd-vb7), CLI flag + SQLite storage (bd-15l), and tests + docs (bd-94z). Feature fully implemented with 21 unit tests and E2E coverage.","dependencies":[{"issue_id":"rust_agent_network_observer-1ju","depends_on_id":"rust_agent_network_observer-3o1","type":"parent-child","created_at":"2026-01-21T05:02:18.871921353Z","created_by":"ubuntu"}]}
{"id":"rust_agent_network_observer-1lq","title":"Colorblind-friendly themes","description":"Purpose:\n- Make rano accessible to users with color vision deficiency\n- ~8% of males have some form of color blindness\n\nUser impact:\n- '--theme colorblind' uses patterns and symbols in addition to colors\n- High-contrast palette visible to all users\n- Equal usability regardless of color perception\n\nFeatures:\n- New theme: colorblind\n- Use unicode markers: ● anthropic, ◆ openai, ▲ google, ○ unknown\n- High-contrast palette: blue/orange/black (deuteranopia-friendly)\n- Patterns in bar charts: █▓▒░ for differentiation\n- Shapes before provider names in stats\n\nImplementation:\n- Add theme variants to existing Theme enum\n- Map provider to (color, symbol) tuple\n- Update format_* functions to include symbol when theme=colorblind\n\nTesting:\n- Unit tests for symbol mapping\n- E2E script verifying symbols appear in output\n- Visual comparison screenshots (docs)","status":"closed","priority":3,"issue_type":"feature","created_at":"2026-01-21T05:07:15.507701965Z","created_by":"ubuntu","updated_at":"2026-01-22T03:05:59.809496537Z","closed_at":"2026-01-22T03:05:59.809454899Z","close_reason":"done","dependencies":[{"issue_id":"rust_agent_network_observer-1lq","depends_on_id":"rust_agent_network_observer-3o1","type":"parent-child","created_at":"2026-01-21T05:07:15.536896755Z","created_by":"ubuntu"}]}
{"id":"rust_agent_network_observer-1o5","title":"Session diff between runs","description":"Purpose:\n- Compare what changed between monitoring sessions\n- Enable baseline comparison for security audits\n- Detect new domains, removed endpoints, or changed patterns\n\nUser impact:\n- 'rano diff --old \u003csession1\u003e --new \u003csession2\u003e' shows changes\n- Auditors can baseline 'normal' and detect deviations\n- Regression detection for AI client updates\n\nFeatures:\n- rano diff --old \u003crun-id|session-name\u003e --new \u003crun-id|session-name\u003e\n- Output sections:\n  - New domains: domains in new but not old\n  - Removed domains: domains in old but not new\n  - Changed counts: domains with \u003e50% count change\n  - New processes: process names that appeared\n  - Provider shifts: significant count changes per provider\n- --format pretty|json\n- --threshold \u003cpercent\u003e for 'significant' change (default 50)\n\nImplementation:\n- Query both sessions from SQLite\n- Build sets/maps per domain, process, provider\n- Compute diff and format\n\nTesting:\n- E2E script that creates two sessions with known differences\n- Verify diff output shows expected changes\n- Test empty diff (identical sessions)","status":"closed","priority":3,"issue_type":"feature","created_at":"2026-01-21T05:07:25.791936234Z","created_by":"ubuntu","updated_at":"2026-01-22T03:12:33.25525674Z","closed_at":"2026-01-22T03:12:33.254738795Z","close_reason":"done","dependencies":[{"issue_id":"rust_agent_network_observer-1o5","depends_on_id":"rust_agent_network_observer-3o1","type":"parent-child","created_at":"2026-01-21T05:07:25.822132831Z","created_by":"ubuntu"}]}
{"id":"rust_agent_network_observer-1qk","title":"Update all dependencies to latest stable versions","description":"## Dependency Updates Required\n\nClosed Dependabot PRs:\n- 5 GH Actions updates (actions group)\n\n## Steps\n1. Run cargo update for Rust deps (opportunistic, even though no Rust dependabot PRs)\n2. Run: cargo check --all-targets \u0026\u0026 cargo clippy --all-targets -- -D warnings\n3. Run: cargo test\n4. Update GH Actions versions in .github/workflows/*.yml\n5. Run: actionlint .github/workflows/*.yml\n\n## Testing\n- cargo test must pass\n- CI must pass on push","status":"closed","priority":3,"issue_type":"task","created_at":"2026-02-10T00:22:25.162854591Z","created_by":"ubuntu","updated_at":"2026-02-13T02:47:14.519928013-06:00","closed_at":"2026-02-13T02:47:14.519928013-06:00","close_reason":"Updated Rust/GHA deps and passed cargo+actionlint gates"}
{"id":"rust_agent_network_observer-1vz","title":"Export to common formats (CSV/JSONL)","description":"Purpose:\n- Enable users to bring rano data into external tools (Excel, Pandas, grep, jq)\n- Unlock SQLite data for analysis pipelines\n- Replace need for manual sqlite3 queries\n\nUser impact:\n- 'rano export --format csv \u003e connections.csv' produces Excel-compatible output\n- 'rano export --format jsonl | jq .domain' enables shell pipelines\n- Data analysts can use familiar tools instead of learning SQLite views\n\nFeatures:\n- rano export --format csv|jsonl [filters]\n- Filters: --since, --until, --run-id, --provider, --domain\n- Output: streaming to stdout (pipeable)\n- Fields: ts, run_id, event, provider, pid, comm, cmdline, proto, local, remote, domain, duration_ms\n- CSV: header row, proper quoting, RFC 4180 compliant\n- JSONL: one JSON object per line (reuses existing JSON formatting)\n\nConstraints:\n- Must handle large datasets without loading all into memory\n- Must not require external dependencies (no csv crate)\n- Field order must be stable (documented)\n\nTesting:\n- Unit tests for CSV quoting edge cases (commas, quotes, newlines)\n- E2E script that exports, validates format, re-imports to verify roundtrip\n- E2E must test empty result set, large result set, special characters","status":"closed","priority":1,"issue_type":"feature","created_at":"2026-01-21T05:01:23.163975299Z","created_by":"ubuntu","updated_at":"2026-01-21T10:58:33.633478143Z","closed_at":"2026-01-21T10:58:33.633432227Z","close_reason":"done","dependencies":[{"issue_id":"rust_agent_network_observer-1vz","depends_on_id":"rust_agent_network_observer-3o1","type":"parent-child","created_at":"2026-01-21T05:01:23.193760593Z","created_by":"ubuntu"}]}
{"id":"rust_agent_network_observer-20u","title":"Implement alert threshold checking","description":"Deliverables:\n- AlertConfig struct with fields:\n  - domain_patterns: Vec\u003cString\u003e\n  - max_connections: Option\u003cu64\u003e\n  - max_per_provider: Option\u003cu64\u003e\n  - duration_threshold_ms: Option\u003cu64\u003e\n  - alert_unknown_domain: bool\n  - bell_on_alert: bool\n  - cooldown_ms: u64\n\n- check_alert() function called on each event\n- AlertState struct tracking:\n  - Last alert time per threshold type\n  - Cooldown enforcement\n  - Total alert count\n\n- Integration points:\n  - Call check_alert() after event detection\n  - Return AlertResult { triggered: bool, alert_type: AlertType, message: String }\n\nImplementation notes:\n- Pattern matching: use glob crate for wildcards, regex for advanced\n- Cooldown: HashMap\u003cAlertType, Instant\u003e for last trigger time\n- Thread-safe if alerts need cross-thread state","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-21T05:00:37.468718314Z","created_by":"ubuntu","updated_at":"2026-01-21T08:21:16.751560546Z","closed_at":"2026-01-21T08:21:16.751513828Z","close_reason":"done","dependencies":[{"issue_id":"rust_agent_network_observer-20u","depends_on_id":"rust_agent_network_observer-2iu","type":"parent-child","created_at":"2026-01-21T05:00:37.481921179Z","created_by":"ubuntu"},{"issue_id":"rust_agent_network_observer-20u","depends_on_id":"rust_agent_network_observer-1jj","type":"blocks","created_at":"2026-01-21T05:01:09.769903852Z","created_by":"ubuntu"}]}
{"id":"rust_agent_network_observer-23q","title":"Preset tests and documentation","description":"Deliverables:\n- Unit tests:\n  - test_load_builtin_preset() - audit preset loads correctly\n  - test_load_user_preset() - custom preset from disk\n  - test_preset_not_found() - error for unknown preset\n  - test_preset_override_by_cli() - CLI flags win over preset\n  - test_multiple_presets_merge() - later preset overrides earlier\n  - test_list_presets_includes_builtin() - all builtins listed\n\n- E2E test script (tests/e2e/presets.sh):\n  - Test each built-in preset runs without error\n  - Create custom preset, verify it loads\n  - Verify CLI flag overrides preset value\n  - Test --list-presets output format\n  - Log: preset content, effective config, actual behavior\n\n- Documentation:\n  - README section: 'Presets'\n  - Table of built-in presets with descriptions\n  - Example: creating custom preset\n  - Troubleshooting: preset not found","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-21T05:05:58.076841992Z","created_by":"ubuntu","updated_at":"2026-01-21T11:15:36.249033974Z","closed_at":"2026-01-21T11:15:36.248981866Z","close_reason":"Added 16 unit tests for presets. Created E2E test (scripts/e2e/presets.sh) with 11 tests. Added Presets section to README with built-in presets table, custom preset examples, merging docs, and troubleshooting.","dependencies":[{"issue_id":"rust_agent_network_observer-23q","depends_on_id":"rust_agent_network_observer-26d","type":"parent-child","created_at":"2026-01-21T05:05:58.096911567Z","created_by":"ubuntu"},{"issue_id":"rust_agent_network_observer-23q","depends_on_id":"rust_agent_network_observer-3t7","type":"blocks","created_at":"2026-01-21T05:06:03.125194958Z","created_by":"ubuntu"}]}
{"id":"rust_agent_network_observer-26d","title":"Smart filtering presets","description":"Purpose:\n- Reduce cognitive load of remembering many CLI flags\n- Enable repeatable workflows with named configurations\n- Make common use cases trivially easy\n\nUser impact:\n- 'rano --preset audit' replaces 'rano --no-dns --log-file audit.log --json ...'\n- Users define their own presets for team consistency\n- Built-in presets cover common scenarios out of the box\n\nFeatures:\n- --preset \u003cname\u003e flag to load named configuration\n- Preset search paths:\n  1. ~/.config/rano/presets/\u003cname\u003e.conf\n  2. /etc/rano/presets/\u003cname\u003e.conf\n  3. Built-in presets (compiled in)\n- Preset format: same as config.conf (key=value)\n- CLI flags override preset values\n- --list-presets to show available presets\n\nBuilt-in presets:\n- 'audit': json=true, log_dir=/tmp/rano-audit, no_dns=true, stats_interval_ms=0\n- 'quiet': summary_only=true, stats_interval_ms=0, no_banner=true\n- 'live': stats_interval_ms=1000, stats_width=80, no_sqlite=true\n- 'verbose': show_ancestry=true, include_udp=true, include_listening=true\n\nTesting:\n- Unit tests for preset loading and override precedence\n- E2E script that uses each built-in preset\n- E2E script that creates custom preset and verifies loading","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-21T05:04:57.987573677Z","created_by":"ubuntu","updated_at":"2026-01-21T11:15:58.786097486Z","closed_at":"2026-01-21T11:15:58.786055757Z","close_reason":"Feature complete: preset system implemented with --preset flag, --list-presets, 4 built-in presets (audit, quiet, live, verbose), custom preset support from ~/.config/rano/presets/, preset merging, CLI override, and comprehensive tests and docs.","dependencies":[{"issue_id":"rust_agent_network_observer-26d","depends_on_id":"rust_agent_network_observer-3o1","type":"parent-child","created_at":"2026-01-21T05:04:58.06786885Z","created_by":"ubuntu"}]}
{"id":"rust_agent_network_observer-291","title":"Add alert CLI flags and config options","description":"Deliverables:\n- CLI flags added to argument parser:\n  --alert-domain \u003cpattern\u003e (repeatable)\n  --alert-max-connections \u003cN\u003e\n  --alert-max-per-provider \u003cN\u003e\n  --alert-duration-ms \u003cN\u003e\n  --alert-unknown-domain\n  --alert-bell\n  --alert-cooldown-ms \u003cN\u003e (default 10000)\n\n- Config file keys:\n  alert_domain=pattern1,pattern2\n  alert_max_connections=100\n  alert_max_per_provider=50\n  alert_duration_ms=30000\n  alert_unknown_domain=true\n  alert_bell=false\n  alert_cooldown_ms=10000\n\n- Help text for each flag with examples\n- Validation: patterns must compile, numbers must be positive","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-21T05:00:44.520740196Z","created_by":"ubuntu","updated_at":"2026-01-21T08:21:13.995282026Z","closed_at":"2026-01-21T08:21:13.995212685Z","close_reason":"done","dependencies":[{"issue_id":"rust_agent_network_observer-291","depends_on_id":"rust_agent_network_observer-2iu","type":"parent-child","created_at":"2026-01-21T05:00:44.549648598Z","created_by":"ubuntu"},{"issue_id":"rust_agent_network_observer-291","depends_on_id":"rust_agent_network_observer-1jj","type":"blocks","created_at":"2026-01-21T05:01:10.138158894Z","created_by":"ubuntu"}]}
{"id":"rust_agent_network_observer-2a6","title":"Design export format and CLI","description":"Deliverables:\n- CLI design document:\n  rano export [OPTIONS]\n  --format csv|jsonl (required)\n  --sqlite \u003cpath\u003e (default: observer.sqlite)\n  --since \u003ctimestamp|relative\u003e (e.g., 24h, 7d, 2026-01-20)\n  --until \u003ctimestamp|relative\u003e\n  --run-id \u003cid\u003e\n  --provider \u003cname\u003e (repeatable)\n  --domain \u003cpattern\u003e (repeatable)\n  --fields \u003clist\u003e (optional: override default field list)\n  --no-header (CSV only: skip header row)\n\n- Define field order and names:\n  ts, run_id, event, provider, pid, comm, cmdline, proto, local_ip, local_port, remote_ip, remote_port, domain, duration_ms\n\n- CSV format spec:\n  - RFC 4180 compliant\n  - Fields with commas/quotes/newlines properly escaped\n  - UTF-8 encoding\n  - CRLF line endings (for Excel compatibility)\n\n- JSONL format spec:\n  - One JSON object per line\n  - UTF-8 encoding\n  - LF line endings\n  - Same fields as CSV\n\n- Output: docs/export-design.md","design":"Implementation notes:\n- CSV escaping: double quotes to escape quotes, wrap fields containing comma/quote/newline\n- No external CSV crate needed - simple escaping logic\n- Streaming: use SQLite row iteration with step(), don't collect()\n- Memory: flush stdout every 1000 rows\n- Empty result: CSV outputs header only, JSONL outputs nothing\n- Progress: no progress bar (would interfere with piping)\n- Errors: fail fast on invalid filter, print to stderr\n\nQuery template:\nSELECT ts, run_id, event, provider, pid, comm, cmdline, proto,\n       local_ip, local_port, remote_ip, remote_port, domain, duration_ms\nFROM events\nWHERE 1=1\n  [AND ts \u003e= :since]\n  [AND ts \u003c :until]\n  [AND run_id = :run_id]\n  [AND provider IN (:providers)]\n  [AND domain LIKE :domain_pattern]\nORDER BY ts ASC","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-21T05:01:32.336206689Z","created_by":"ubuntu","updated_at":"2026-01-21T07:44:57.416472667Z","closed_at":"2026-01-21T07:44:57.416429906Z","close_reason":"done","dependencies":[{"issue_id":"rust_agent_network_observer-2a6","depends_on_id":"rust_agent_network_observer-1vz","type":"parent-child","created_at":"2026-01-21T05:01:32.364391899Z","created_by":"ubuntu"}]}
{"id":"rust_agent_network_observer-2fm","title":"Alert tests and documentation","description":"Deliverables:\n- Unit tests:\n  - test_alert_domain_pattern_match() - glob and regex patterns\n  - test_alert_max_connections_threshold() - trigger at exact threshold\n  - test_alert_cooldown_prevents_spam() - no re-alert within cooldown\n  - test_alert_duration_threshold() - long-running connections flagged\n  - test_alert_unknown_domain() - unresolved domains trigger alert\n  - test_alert_config_validation() - invalid patterns rejected\n\n- E2E test script (tests/e2e/alert-thresholds.sh):\n  - Use mock process that makes N connections\n  - Verify domain watch alert triggers on matching domain\n  - Verify max-connections alert at threshold\n  - Verify cooldown prevents duplicate alerts\n  - Verify alerts appear in stderr, not stdout\n  - Verify SQLite has alert=true for alert events\n  - Log: inputs, expected alerts, actual alerts\n\n- Documentation:\n  - README section: 'Alert Thresholds'\n  - Example use cases: security audit, rate limit detection\n  - Troubleshooting: 'why aren't my alerts firing'","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-21T05:01:03.601295333Z","created_by":"ubuntu","updated_at":"2026-01-21T10:33:42.427929569Z","closed_at":"2026-01-21T10:33:42.427885777Z","close_reason":"done","dependencies":[{"issue_id":"rust_agent_network_observer-2fm","depends_on_id":"rust_agent_network_observer-2iu","type":"parent-child","created_at":"2026-01-21T05:01:03.619668324Z","created_by":"ubuntu"},{"issue_id":"rust_agent_network_observer-2fm","depends_on_id":"rust_agent_network_observer-lr2","type":"blocks","created_at":"2026-01-21T05:01:11.080924402Z","created_by":"ubuntu"}]}
{"id":"rust_agent_network_observer-2iu","title":"Alert thresholds and watch mode","description":"Purpose:\n- Transform passive monitoring into active alerting\n- Allow users to set guard rails and not watch output constantly\n- Enable security-focused workflows with domain watching\n\nUser impact:\n- 'rano --alert-domain evil.com --alert-max-connections 100' instantly flags suspicious activity\n- Auditors can set thresholds and walk away\n- Alerts are prominent and logged separately\n\nFeatures:\n- --alert-domain \u003cpattern\u003e: Regex/glob for domains to highlight/warn\n- --alert-max-connections \u003cN\u003e: Warn when total connections exceed N\n- --alert-max-per-provider \u003cN\u003e: Warn when any provider exceeds N\n- --alert-duration-ms \u003cN\u003e: Flag connections lasting longer than N ms\n- --alert-unknown-domain: Warn on any connection to unresolved domain\n\nOutput behavior:\n- Alerts print to stderr with [ALERT] prefix\n- Alerts use distinct color (red/yellow)\n- Optional --alert-bell to ring terminal bell\n- Alert events logged to SQLite with alert=true flag\n\nTesting:\n- Unit tests for threshold checking and pattern matching\n- E2E script that triggers each alert type and validates output\n- E2E script must verify alerts don't fire for normal traffic\n\nConstraints:\n- Must not add latency to main polling loop\n- Patterns must be case-insensitive and support wildcards","status":"closed","priority":1,"issue_type":"feature","created_at":"2026-01-21T05:00:19.697313595Z","created_by":"ubuntu","updated_at":"2026-01-21T10:37:55.6974175Z","closed_at":"2026-01-21T10:37:55.697362296Z","close_reason":"done","dependencies":[{"issue_id":"rust_agent_network_observer-2iu","depends_on_id":"rust_agent_network_observer-3o1","type":"parent-child","created_at":"2026-01-21T05:00:19.71368668Z","created_by":"ubuntu"}]}
{"id":"rust_agent_network_observer-2xz","title":"Implement session name generation","description":"Deliverables:\n- generate_session_name(patterns: \u0026[String], primary_provider: Provider) -\u003e String:\n  - time_of_day: night/morning/afternoon/evening\n  - provider: anthropic/openai/google/mixed\n  - pattern: first pattern or 'default'\n  - date: YYYY-MM-DD\n  - Format: '{time}-{provider}-{pattern}-{date}'\n\n- CLI: --session-name \u003cname\u003e to override\n- Store in sessions table: session_name column\n- Report accepts --session \u003cname\u003e as filter (in addition to --run-id)\n\n- Unit tests for name generation logic\n- E2E test verifying session name in report output","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-21T05:11:22.010801099Z","created_by":"ubuntu","updated_at":"2026-01-22T03:31:17.816564877Z","closed_at":"2026-01-22T03:31:17.816521615Z","close_reason":"done","dependencies":[{"issue_id":"rust_agent_network_observer-2xz","depends_on_id":"rust_agent_network_observer-q9u","type":"parent-child","created_at":"2026-01-21T05:11:22.08683602Z","created_by":"ubuntu"}]}
{"id":"rust_agent_network_observer-300","title":"Add config subcommand CLI","description":"Deliverables:\n- Add 'config' to Command enum with subcommands:\n  - check: validate all config files\n  - show: display resolved config\n  - paths: show config file locations\n\n- ConfigSubcommand enum:\n  - Check\n  - Show { json: bool }\n  - Paths\n\n- run_config_check():\n  1. Find all config files (config.conf, rano.toml, presets)\n  2. Run validation on each\n  3. Print errors/warnings with file:line context\n  4. Exit with appropriate code\n\n- run_config_show(json: bool):\n  1. Load all config as if starting monitor\n  2. Print resolved key=value (or JSON)\n  3. Show source of each value (default, config, cli)\n\n- run_config_paths():\n  1. List search paths for each config type\n  2. Mark which files exist\n  3. Show load order\n\n- Output formatting:\n  - Errors: red with ✗ prefix\n  - Warnings: yellow with ⚠ prefix\n  - Info: normal with → prefix","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-21T05:06:30.990453145Z","created_by":"ubuntu","updated_at":"2026-01-21T18:00:29.974960495Z","closed_at":"2026-01-21T18:00:29.974891415Z","close_reason":"done","dependencies":[{"issue_id":"rust_agent_network_observer-300","depends_on_id":"rust_agent_network_observer-n2d","type":"parent-child","created_at":"2026-01-21T05:06:31.003915277Z","created_by":"ubuntu"},{"issue_id":"rust_agent_network_observer-300","depends_on_id":"rust_agent_network_observer-52z","type":"blocks","created_at":"2026-01-21T05:06:44.51542021Z","created_by":"ubuntu"}]}
{"id":"rust_agent_network_observer-33o","title":"Implement colorblind theme","description":"Deliverables:\n- Add Theme::Colorblind variant\n- Provider symbols:\n  - Anthropic: ● (filled circle)\n  - OpenAI: ◆ (diamond)\n  - Google: ▲ (triangle)\n  - Unknown: ○ (empty circle)\n\n- High-contrast color palette:\n  - Anthropic: bright blue\n  - OpenAI: orange\n  - Google: black (or dark gray on dark bg)\n  - Unknown: gray\n\n- Update format_* functions to include symbol when theme=colorblind\n- Bar chart patterns: use different fill chars per provider\n\n- Unit tests for symbol mapping\n- E2E test verifying symbols in output\n- Add --theme colorblind to help text","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-21T05:11:58.460826002Z","created_by":"ubuntu","updated_at":"2026-01-22T03:05:49.434879469Z","closed_at":"2026-01-22T03:05:49.434818484Z","close_reason":"done","dependencies":[{"issue_id":"rust_agent_network_observer-33o","depends_on_id":"rust_agent_network_observer-1lq","type":"parent-child","created_at":"2026-01-21T05:11:58.524640198Z","created_by":"ubuntu"}]}
{"id":"rust_agent_network_observer-35w","title":"rano vNext: accuracy + insight + performance","description":"Goals:\n- Make domain attribution accurate and trustworthy when possible.\n- Make SQLite logging obviously useful through reporting and live insights.\n- Improve performance and reliability under high event rates.\n- Keep UX simple: defaults work, advanced options are discoverable.\n\nContext:\n- Current capture is PTR-only and can misattribute domains.\n- SQLite has strong schema/views but no first-class reporting UX.\n- Event rates can spike and cause sqlite overhead.\n- Provider mapping is fixed to substring matching; users need overrides.\n\nScope:\n- Implement 5 prioritized improvements with tasks, tests, and docs.\n- Preserve existing CLI behavior; improvements are additive.\n\nQuality bar:\n- Every feature must include comprehensive unit tests and at least one e2e test script.\n- E2E scripts must include detailed, human-readable logging (inputs, expected outputs, actual outputs).\n- Tests must run offline without elevated privileges unless explicitly marked otherwise.\n\nAcceptance:\n- Each child epic has tasks with unit tests + e2e scripts + docs.\n- All new features degrade gracefully (no sudo/libpcap, missing config).\n","status":"closed","priority":1,"issue_type":"epic","created_at":"2026-01-17T16:00:47.256141412-06:00","created_by":"ubuntu","updated_at":"2026-02-13T02:43:24.053511525-06:00","closed_at":"2026-01-21T22:37:25.770571234Z"}
{"id":"rust_agent_network_observer-35w.1","title":"True domain attribution via libpcap DNS+SNI","description":"Purpose:\n- Provide accurate hostname attribution via DNS responses and TLS SNI, not just PTR.\n- Preserve current PTR fallback when libpcap/sudo is unavailable.\n\nUser impact:\n- Domains match what the client intended (SNI), not a reverse DNS guess.\n- Clear warnings when privileged capture is unavailable; no silent failure.\n\nConstraints:\n- Must be feature-gated to avoid new deps for default builds.\n- Must avoid any breaking change to default CLI behavior.\n\nTesting:\n- Unit tests for DNS/SNI parsing + mapping logic.\n- E2E script using offline pcap fixtures to validate domain attribution and fallback logging.\n","status":"closed","priority":1,"issue_type":"feature","created_at":"2026-01-17T16:00:47.293260146-06:00","created_by":"ubuntu","updated_at":"2026-02-13T02:43:24.055464144-06:00","closed_at":"2026-01-21T22:34:10.073975262Z","dependencies":[{"issue_id":"rust_agent_network_observer-35w.1","depends_on_id":"rust_agent_network_observer-35w","type":"parent-child","created_at":"2026-01-17T16:00:47.294764141-06:00","created_by":"ubuntu"}]}
{"id":"rust_agent_network_observer-35w.1.1","title":"Design pcap dataflow + mapping model","description":"Deliverables:\n- Dataflow diagram of packet capture -\u003e DNS/SNI extraction -\u003e IP/port mapping -\u003e event enrichment.\n- Decision on retention/TTL for SNI/DNS mappings.\n- Clear rules for IPv4/IPv6 and UDP/TCP handling.\n\nNotes:\n- Aim for minimal parsing to avoid heavy CPU usage.\n- Prefer map keyed by (remote_ip, remote_port) with TTL to avoid staleness.\n","design":"-","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-17T16:00:47.330068504-06:00","created_by":"ubuntu","updated_at":"2026-01-19T20:35:57.065011635-06:00","closed_at":"2026-01-19T20:35:57.065011635-06:00","close_reason":"Design document created at docs/pcap-design.md covering dataflow, DNS/SNI parsing, cache TTL, IPv4/IPv6, and feature gating.","dependencies":[{"issue_id":"rust_agent_network_observer-35w.1.1","depends_on_id":"rust_agent_network_observer-35w.1","type":"parent-child","created_at":"2026-01-17T16:00:47.331334777-06:00","created_by":"ubuntu"}]}
{"id":"rust_agent_network_observer-35w.1.2","title":"Implement libpcap capture pipeline (feature-gated)","description":"Deliverables:\n- New Cargo feature (e.g., `pcap`) and module for capture.\n- Packet capture loop with filter for DNS + TLS ClientHello.\n- Build cleanly without feature and run as before.\n\nNotes:\n- Use BPF filters to reduce overhead.\n- Integrate with existing CLI flags (`--pcap`, `--domain-mode pcap`).\n","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-17T16:00:47.364314189-06:00","created_by":"ubuntu","updated_at":"2026-01-20T19:15:32.59212804-06:00","closed_at":"2026-01-20T19:15:32.59212804-06:00","close_reason":"Closed","dependencies":[{"issue_id":"rust_agent_network_observer-35w.1.2","depends_on_id":"rust_agent_network_observer-35w.1","type":"parent-child","created_at":"2026-01-17T16:00:47.365761438-06:00","created_by":"ubuntu"},{"issue_id":"rust_agent_network_observer-35w.1.2","depends_on_id":"rust_agent_network_observer-35w.1.1","type":"blocks","created_at":"2026-01-17T16:00:47.367841865-06:00","created_by":"ubuntu"}]}
{"id":"rust_agent_network_observer-35w.1.3","title":"TLS SNI + DNS response parsing and mapping","description":"Deliverables:\n- DNS parser to map hostname -\u003e A/AAAA IP.\n- TLS ClientHello SNI parser (minimal) for hostname extraction.\n- Mapping table with TTL + eviction.\n\nNotes:\n- Prefer simple parser over full TLS stack for speed.\n- Associate SNI with destination IP/port when possible.\n","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-17T16:00:47.400836414-06:00","created_by":"ubuntu","updated_at":"2026-01-20T19:16:41.373360273-06:00","closed_at":"2026-01-20T19:16:41.373360273-06:00","close_reason":"Closed","dependencies":[{"issue_id":"rust_agent_network_observer-35w.1.3","depends_on_id":"rust_agent_network_observer-35w.1","type":"parent-child","created_at":"2026-01-17T16:00:47.402117355-06:00","created_by":"ubuntu"},{"issue_id":"rust_agent_network_observer-35w.1.3","depends_on_id":"rust_agent_network_observer-35w.1.2","type":"blocks","created_at":"2026-01-17T16:00:47.404122822-06:00","created_by":"ubuntu"}]}
{"id":"rust_agent_network_observer-35w.1.4","title":"Permissions + fallback UX for pcap","description":"Deliverables:\n- Detect missing privileges (sudo/CAP_NET_RAW) and log explicit warning.\n- Auto-fallback to PTR without error exit.\n- Clear log messages about capture mode in banner + JSON meta.\n\nNotes:\n- Must avoid noisy logs for non-pcap users.\n","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-17T16:00:47.43948408-06:00","created_by":"ubuntu","updated_at":"2026-01-20T19:20:05.008435116-06:00","closed_at":"2026-01-20T19:20:05.008435116-06:00","close_reason":"Closed","dependencies":[{"issue_id":"rust_agent_network_observer-35w.1.4","depends_on_id":"rust_agent_network_observer-35w.1","type":"parent-child","created_at":"2026-01-17T16:00:47.440851421-06:00","created_by":"ubuntu"},{"issue_id":"rust_agent_network_observer-35w.1.4","depends_on_id":"rust_agent_network_observer-35w.1.2","type":"blocks","created_at":"2026-01-17T16:00:47.442894188-06:00","created_by":"ubuntu"}]}
{"id":"rust_agent_network_observer-35w.1.5","title":"Tests + fixtures for pcap capture","description":"Deliverables:\n- Comprehensive unit tests for DNS + SNI parsing, mapping TTL/eviction, and error paths.\n- Fixture-based tests using small deterministic pcaps (offline, no root).\n- CI job that runs feature-flag tests.\n- Test logs must include inputs, decoded domains, and mapping outcomes for auditability.\n\nNotes:\n- Use offline pcap fixtures to keep tests deterministic and privilege-free.\n","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-17T16:00:47.47746696-06:00","created_by":"ubuntu","updated_at":"2026-02-13T02:43:24.057003124-06:00","closed_at":"2026-01-21T10:52:13.818221391Z","dependencies":[{"issue_id":"rust_agent_network_observer-35w.1.5","depends_on_id":"rust_agent_network_observer-35w.1","type":"parent-child","created_at":"2026-01-17T16:00:47.478773749-06:00","created_by":"ubuntu"},{"issue_id":"rust_agent_network_observer-35w.1.5","depends_on_id":"rust_agent_network_observer-35w.1.3","type":"blocks","created_at":"2026-01-17T16:00:47.48080809-06:00","created_by":"ubuntu"}]}
{"id":"rust_agent_network_observer-35w.1.6","title":"Docs update: pcap mode","description":"Deliverables:\n- README update describing pcap feature, capture modes, and fallback behavior.\n- CLI help text examples and troubleshooting steps.\n- Reference the e2e script and its log output location for verification.\n","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-17T16:00:47.514480509-06:00","created_by":"ubuntu","updated_at":"2026-02-13T02:43:24.058504614-06:00","closed_at":"2026-01-21T22:24:01.370433309Z","dependencies":[{"issue_id":"rust_agent_network_observer-35w.1.6","depends_on_id":"rust_agent_network_observer-35w.1","type":"parent-child","created_at":"2026-01-17T16:00:47.515763904-06:00","created_by":"ubuntu"},{"issue_id":"rust_agent_network_observer-35w.1.6","depends_on_id":"rust_agent_network_observer-35w.1.4","type":"blocks","created_at":"2026-01-17T16:00:47.517769762-06:00","created_by":"ubuntu"},{"issue_id":"rust_agent_network_observer-35w.1.6","depends_on_id":"rust_agent_network_observer-35w.1.5","type":"blocks","created_at":"2026-01-17T16:00:47.519698156-06:00","created_by":"ubuntu"},{"issue_id":"rust_agent_network_observer-35w.1.6","depends_on_id":"rust_agent_network_observer-35w.1.7","type":"blocks","created_at":"2026-01-17T16:04:45.289315739-06:00","created_by":"ubuntu"}]}
{"id":"rust_agent_network_observer-35w.1.7","title":"E2E: pcap attribution + fallback logging","description":"Deliverables:\n- E2E script that replays offline pcap fixtures with `--pcap` and validates domain attribution.\n- Explicit test case for privilege failure → warning + PTR fallback.\n- Use shared e2e harness/log format.\n- Log file must include: input fixture, expected domains, actual output, and fallback warnings.\n\nNotes:\n- Must run without root by using offline pcaps only.\n","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-17T16:04:02.705396614-06:00","created_by":"ubuntu","updated_at":"2026-02-13T02:43:24.059944931-06:00","closed_at":"2026-01-21T17:40:45.61505004Z","dependencies":[{"issue_id":"rust_agent_network_observer-35w.1.7","depends_on_id":"rust_agent_network_observer-35w.1","type":"parent-child","created_at":"2026-01-17T16:04:02.718507988-06:00","created_by":"ubuntu"},{"issue_id":"rust_agent_network_observer-35w.1.7","depends_on_id":"rust_agent_network_observer-35w.1.3","type":"blocks","created_at":"2026-01-17T16:04:02.725102312-06:00","created_by":"ubuntu"},{"issue_id":"rust_agent_network_observer-35w.1.7","depends_on_id":"rust_agent_network_observer-35w.1.4","type":"blocks","created_at":"2026-01-17T16:04:02.727985049-06:00","created_by":"ubuntu"},{"issue_id":"rust_agent_network_observer-35w.1.7","depends_on_id":"rust_agent_network_observer-35w.7","type":"blocks","created_at":"2026-01-17T16:06:02.211912029-06:00","created_by":"ubuntu"}],"comments":[{"id":5,"issue_id":"rust_agent_network_observer-35w.1.7","author":"Dicklesworthstone","text":"Reviewed existing offline pcap E2E coverage: scripts/e2e/pcap-attribution.sh uses tests/fixtures/pcap/dns-fixture.pcap, validates domain attribution + PTR fallback warnings. Attempted 'cargo build --features pcap' but blocked on cargo file locks; killed the build.","created_at":"2026-01-21T17:40:40Z"}]}
{"id":"rust_agent_network_observer-35w.1.8","title":"CI: build/test matrix for pcap feature","description":"Deliverables:\n- CI job builds with `--features pcap` to ensure feature-gated code compiles.\n- Test job runs offline pcap fixture tests (no root).\n- Clear CI log markers indicating pcap feature coverage.\n","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-17T16:06:24.203513592-06:00","created_by":"ubuntu","updated_at":"2026-02-13T02:43:24.061372464-06:00","closed_at":"2026-01-21T21:23:29.607699057Z","dependencies":[{"issue_id":"rust_agent_network_observer-35w.1.8","depends_on_id":"rust_agent_network_observer-35w.1","type":"parent-child","created_at":"2026-01-17T16:06:24.215459068-06:00","created_by":"ubuntu"},{"issue_id":"rust_agent_network_observer-35w.1.8","depends_on_id":"rust_agent_network_observer-35w.1.2","type":"blocks","created_at":"2026-01-17T16:06:24.222482578-06:00","created_by":"ubuntu"},{"issue_id":"rust_agent_network_observer-35w.1.8","depends_on_id":"rust_agent_network_observer-35w.1.5","type":"blocks","created_at":"2026-01-17T16:06:24.226339745-06:00","created_by":"ubuntu"}]}
{"id":"rust_agent_network_observer-35w.2","title":"SQLite report subcommand","description":"Purpose:\n- Turn SQLite logs into actionable insights without live monitoring.\n\nUser impact:\n- Users can summarize sessions, compare providers, and inspect top domains/ports after the fact.\n\nConstraints:\n- Must work with existing schema/views and degrade gracefully if missing.\n\nTesting:\n- Unit tests for query logic + formatting.\n- E2E script that seeds a fixture DB and validates report output (pretty + JSON).\n","status":"closed","priority":1,"issue_type":"feature","created_at":"2026-01-17T16:00:47.550931262-06:00","created_by":"ubuntu","updated_at":"2026-01-19T22:07:18.010503566-06:00","closed_at":"2026-01-19T22:07:18.010503566-06:00","close_reason":"All implementation subtasks complete. Only P3 docs updates remaining.","dependencies":[{"issue_id":"rust_agent_network_observer-35w.2","depends_on_id":"rust_agent_network_observer-35w","type":"parent-child","created_at":"2026-01-17T16:00:47.552169093-06:00","created_by":"ubuntu"}]}
{"id":"rust_agent_network_observer-35w.2.1","title":"Design report UX + query plan","description":"Deliverables:\n- CLI design (`rano report --latest`, `--run-id`, `--since`, `--until`).\n- Define time range semantics (UTC vs local, inclusive/exclusive bounds).\n- Decide which views/queries power each report section and top-N ordering.\n- Define compatibility behavior when views/tables are missing (fallback or warning).\n- Output format for pretty + JSON (stable keys, deterministic ordering).\n","design":"-","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-17T16:00:47.58637321-06:00","created_by":"ubuntu","updated_at":"2026-01-19T20:35:04.276935532-06:00","closed_at":"2026-01-19T20:35:04.276935532-06:00","close_reason":"Design document complete in docs/report-design.md. Covers: CLI design (--latest, --run-id, --since, --until, --json), time range semantics (RFC3339 UTC, inclusive/exclusive bounds), query mapping per section, compatibility/fallback behavior for missing tables/views, and JSON output format with stable keys and deterministic ordering.","dependencies":[{"issue_id":"rust_agent_network_observer-35w.2.1","depends_on_id":"rust_agent_network_observer-35w.2","type":"parent-child","created_at":"2026-01-17T16:00:47.587704224-06:00","created_by":"ubuntu"}]}
{"id":"rust_agent_network_observer-35w.2.2","title":"Implement report subcommand","description":"Deliverables:\n- `rano report` command with provider totals, top domains/IPs/ports.\n- JSON output with stable keys for automation.\n- Handles empty DB gracefully.\n- Deterministic ordering of top-N outputs.\n- Integrates schema compatibility guard behavior.\n","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-17T16:00:47.621441233-06:00","created_by":"ubuntu","updated_at":"2026-01-19T20:46:14.060529655-06:00","closed_at":"2026-01-19T20:46:14.060529655-06:00","close_reason":"Report subcommand fully implemented. Features: CLI parsing (--latest, --run-id, --since, --until, --json, --top), SQLite queries for summary/providers/domains/IPs, pretty and JSON output, time range filtering (RFC3339, date-only, relative like 24h/7d), error handling for missing db/tables. Tests pass. Help updated.","dependencies":[{"issue_id":"rust_agent_network_observer-35w.2.2","depends_on_id":"rust_agent_network_observer-35w.2","type":"parent-child","created_at":"2026-01-17T16:00:47.623118791-06:00","created_by":"ubuntu"},{"issue_id":"rust_agent_network_observer-35w.2.2","depends_on_id":"rust_agent_network_observer-35w.2.1","type":"blocks","created_at":"2026-01-17T16:00:47.62548564-06:00","created_by":"ubuntu"}]}
{"id":"rust_agent_network_observer-35w.2.3","title":"Report formatting + UX polish","description":"Deliverables:\n- Table-like layout, consistent colors with providers.\n- Clear headers, time ranges, and session metadata.\n","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-17T16:00:47.66299498-06:00","created_by":"ubuntu","updated_at":"2026-01-19T22:02:47.61395626-06:00","closed_at":"2026-01-19T22:02:47.61395626-06:00","close_reason":"Completed UX polish: added session duration calculation (format_session_duration, parse_rfc3339_secs, format_duration_human functions). Report now shows 'Duration: 1h 25m 4s' format for session info. All unit tests pass, build succeeds.","dependencies":[{"issue_id":"rust_agent_network_observer-35w.2.3","depends_on_id":"rust_agent_network_observer-35w.2","type":"parent-child","created_at":"2026-01-17T16:00:47.664263337-06:00","created_by":"ubuntu"},{"issue_id":"rust_agent_network_observer-35w.2.3","depends_on_id":"rust_agent_network_observer-35w.2.2","type":"blocks","created_at":"2026-01-17T16:00:47.66636891-06:00","created_by":"ubuntu"}]}
{"id":"rust_agent_network_observer-35w.2.4","title":"Report tests","description":"Deliverables:\n- Unit tests for report queries and formatting.\n- Fixture SQLite DB and golden output tests for pretty + JSON formats.\n- JSON output schema validation.\n- Test logs must show query inputs, row counts, and output snippets.\n","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-17T16:00:47.701129021-06:00","created_by":"ubuntu","updated_at":"2026-01-19T22:06:03.0501287-06:00","closed_at":"2026-01-19T22:06:03.0501287-06:00","close_reason":"Report tests complete: E2E test (report-seeded-sqlite.sh) with seeded fixture DB, JSON/pretty format tests, --top/--since/--until flags, session metadata display, error handling. Fixed grep pattern portability issue (use [[:space:]] instead of \\s). All tests pass.","dependencies":[{"issue_id":"rust_agent_network_observer-35w.2.4","depends_on_id":"rust_agent_network_observer-35w.2","type":"parent-child","created_at":"2026-01-17T16:00:47.702460536-06:00","created_by":"ubuntu"},{"issue_id":"rust_agent_network_observer-35w.2.4","depends_on_id":"rust_agent_network_observer-35w.2.2","type":"blocks","created_at":"2026-01-17T16:00:47.704645607-06:00","created_by":"ubuntu"}]}
{"id":"rust_agent_network_observer-35w.2.5","title":"Docs update: report usage","description":"Deliverables:\n- README section for report command with examples.\n- Document how to run the report e2e script and where logs are written.\n","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-17T16:00:47.737317126-06:00","created_by":"ubuntu","updated_at":"2026-01-19T22:08:21.355189173-06:00","closed_at":"2026-01-19T22:08:21.355189173-06:00","close_reason":"Added documentation to README: report command section with examples and time range formats; SQLite batching performance tuning guide with table.","dependencies":[{"issue_id":"rust_agent_network_observer-35w.2.5","depends_on_id":"rust_agent_network_observer-35w.2","type":"parent-child","created_at":"2026-01-17T16:00:47.738564414-06:00","created_by":"ubuntu"},{"issue_id":"rust_agent_network_observer-35w.2.5","depends_on_id":"rust_agent_network_observer-35w.2.3","type":"blocks","created_at":"2026-01-17T16:00:47.74065506-06:00","created_by":"ubuntu"},{"issue_id":"rust_agent_network_observer-35w.2.5","depends_on_id":"rust_agent_network_observer-35w.2.4","type":"blocks","created_at":"2026-01-17T16:00:47.742650999-06:00","created_by":"ubuntu"},{"issue_id":"rust_agent_network_observer-35w.2.5","depends_on_id":"rust_agent_network_observer-35w.2.6","type":"blocks","created_at":"2026-01-17T16:04:45.324225597-06:00","created_by":"ubuntu"}]}
{"id":"rust_agent_network_observer-35w.2.6","title":"E2E: report on seeded sqlite","description":"Deliverables:\n- E2E script that seeds a fixture SQLite DB, runs `rano report` (pretty + JSON), and validates outputs.\n- Use shared e2e harness/log format.\n- Log file must include: seed data summary, commands run, and output excerpts.\n","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-17T16:04:02.768414015-06:00","created_by":"ubuntu","updated_at":"2026-01-19T22:01:56.674741946-06:00","closed_at":"2026-01-19T22:01:56.674741946-06:00","close_reason":"Created tests/e2e/report-seeded-sqlite.sh with 11 test cases validating report command with seeded SQLite data. Tests: all data, JSON output, --latest, --run-id, --top, --since, --until, time window, pretty format, error handling, session metadata.","dependencies":[{"issue_id":"rust_agent_network_observer-35w.2.6","depends_on_id":"rust_agent_network_observer-35w.2","type":"parent-child","created_at":"2026-01-17T16:04:02.769745409-06:00","created_by":"ubuntu"},{"issue_id":"rust_agent_network_observer-35w.2.6","depends_on_id":"rust_agent_network_observer-35w.2.2","type":"blocks","created_at":"2026-01-17T16:04:02.772453651-06:00","created_by":"ubuntu"},{"issue_id":"rust_agent_network_observer-35w.2.6","depends_on_id":"rust_agent_network_observer-35w.7","type":"blocks","created_at":"2026-01-17T16:06:02.249825015-06:00","created_by":"ubuntu"}]}
{"id":"rust_agent_network_observer-35w.2.7","title":"Report schema compatibility guard","description":"Deliverables:\n- Check for required tables/views and emit a clear warning if missing.\n- Provide guidance to regenerate schema (run once with current binary).\n- Ensure report returns a non-zero exit only on fatal errors, not on empty data.\n\nNotes:\n- This prevents confusing failures when older DBs are used.\n","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-17T16:07:13.399662778-06:00","created_by":"ubuntu","updated_at":"2026-01-19T22:01:17.100091012-06:00","closed_at":"2026-01-19T22:01:17.100091012-06:00","close_reason":"Closed","dependencies":[{"issue_id":"rust_agent_network_observer-35w.2.7","depends_on_id":"rust_agent_network_observer-35w.2","type":"parent-child","created_at":"2026-01-17T16:07:13.417385498-06:00","created_by":"ubuntu"},{"issue_id":"rust_agent_network_observer-35w.2.7","depends_on_id":"rust_agent_network_observer-35w.2.2","type":"blocks","created_at":"2026-01-17T16:07:13.42383439-06:00","created_by":"ubuntu"}]}
{"id":"rust_agent_network_observer-35w.3","title":"Batching + async SQLite writes","description":"Purpose:\n- Reduce overhead and improve reliability under high event rates.\n\nUser impact:\n- Lower CPU usage, fewer sqlite lock stalls, smoother live output.\n\nTesting:\n- Unit tests for batch flush, error fallback.\n- E2E load script that validates counts and logging under high event rate.\n","status":"closed","priority":1,"issue_type":"feature","created_at":"2026-01-17T16:00:47.780679665-06:00","created_by":"ubuntu","updated_at":"2026-01-19T22:07:18.021884019-06:00","closed_at":"2026-01-19T22:07:18.021884019-06:00","close_reason":"All implementation subtasks complete. Only P3 docs updates remaining.","dependencies":[{"issue_id":"rust_agent_network_observer-35w.3","depends_on_id":"rust_agent_network_observer-35w","type":"parent-child","created_at":"2026-01-17T16:00:47.782036456-06:00","created_by":"ubuntu"}]}
{"id":"rust_agent_network_observer-35w.3.1","title":"Design batching strategy","description":"Deliverables:\n- Decide queue/batch size and flush interval defaults.\n- Define shutdown flush behavior to avoid data loss.\n- Define backpressure + memory cap policy (drop oldest, drop newest, or block).\n- Specify how backpressure events are logged (rate-limited warnings).\n","design":"Batching strategy proposal\\n\\nDefaults\\n- queue_capacity: 10_000 events (bounded sync_channel)\\n- batch_size: 200 events (transaction per batch)\\n- flush_interval_ms: 1000 (forces a write even if batch not full)\\n- max_send_block_ms: 5 (optional brief backpressure before drop)\\n\\nWriter model\\n- Single SQLite writer thread owns Connection. Producers send SqlMsg::Event(event) via sync_channel.\\n- Writer loop drains channel: accumulate Vec\u003cEvent\u003e until batch_size reached or flush_interval elapsed, then write in a single transaction with prepared stmt.\\n- Flush on Shutdown: producer sends SqlMsg::Shutdown; writer drains remaining events, flushes, then exits. Main thread joins writer before finalize_session.\\n\\nBackpressure + memory cap\\n- Bounded channel provides memory cap.\\n- Producer uses try_send (or short timeout via send_timeout) so poller doesn’t stall. If full after timeout, drop newest event and increment dropped counter.\\n- Expose dropped count in summary and/or stats (optional).\\n\\nBackpressure logging\\n- Rate-limit warning (e.g., once per 10s) to stderr and log file: \"warning: sqlite queue full, dropped N events (total M)\".\\n- Reset per-interval counter after logging.\\n\\nRationale\\n- Poll loop stays responsive; DB writes amortized; bounded memory; graceful shutdown flush minimizes loss.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-17T16:00:47.815299274-06:00","created_by":"ubuntu","updated_at":"2026-01-17T17:42:38.455349791-06:00","closed_at":"2026-01-17T17:42:38.455349791-06:00","close_reason":"Closed","dependencies":[{"issue_id":"rust_agent_network_observer-35w.3.1","depends_on_id":"rust_agent_network_observer-35w.3","type":"parent-child","created_at":"2026-01-17T16:00:47.816549828-06:00","created_by":"ubuntu"}]}
{"id":"rust_agent_network_observer-35w.3.2","title":"Implement batch queue + transaction flush","description":"Deliverables:\n- Buffered event queue with timed flush.\n- Single transaction per batch.\n- Error handling with fallback to direct insert on failure.\n- Backpressure + memory cap enforcement consistent with design.\n- Telemetry/logging for drops or stalls (rate-limited).\n","notes":"Implemented async SQLite batching: writer thread w/ bounded sync_channel (10k), batch size 200, flush interval 1s, drop+rate-limited warnings, graceful Shutdown draining and finalize. Cargo build currently fails due to pre-existing duplicate provider config definitions (ProviderMatcher/load_provider_matcher/etc.) and apply_provider_config signature mismatch; not related to batching.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-17T16:00:47.851187862-06:00","created_by":"ubuntu","updated_at":"2026-01-17T17:59:27.038037024-06:00","closed_at":"2026-01-17T17:59:27.038037024-06:00","close_reason":"Closed","dependencies":[{"issue_id":"rust_agent_network_observer-35w.3.2","depends_on_id":"rust_agent_network_observer-35w.3","type":"parent-child","created_at":"2026-01-17T16:00:47.852680246-06:00","created_by":"ubuntu"},{"issue_id":"rust_agent_network_observer-35w.3.2","depends_on_id":"rust_agent_network_observer-35w.3.1","type":"blocks","created_at":"2026-01-17T16:00:47.854951567-06:00","created_by":"ubuntu"}]}
{"id":"rust_agent_network_observer-35w.3.3","title":"Config flags for batching","description":"Deliverables:\n- `--db-batch-size`, `--db-flush-ms` flags.\n- Add `--db-queue-max` (or equivalent) to cap memory.\n- Document defaults and tradeoffs.\n","notes":"Added db batching flags/config: --db-batch-size/--db-flush-ms/--db-queue-max and config keys (db_batch_size/db_flush_ms/db_queue_max). start_sqlite_writer/sqlite_writer_loop now use args. README updated with defaults + tradeoffs. Tests: cargo test -q.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-17T16:00:47.891217667-06:00","created_by":"ubuntu","updated_at":"2026-01-17T18:10:38.68861098-06:00","closed_at":"2026-01-17T18:10:38.68861098-06:00","close_reason":"Closed","dependencies":[{"issue_id":"rust_agent_network_observer-35w.3.3","depends_on_id":"rust_agent_network_observer-35w.3","type":"parent-child","created_at":"2026-01-17T16:00:47.892516731-06:00","created_by":"ubuntu"},{"issue_id":"rust_agent_network_observer-35w.3.3","depends_on_id":"rust_agent_network_observer-35w.3.2","type":"blocks","created_at":"2026-01-17T16:00:47.894889932-06:00","created_by":"ubuntu"}]}
{"id":"rust_agent_network_observer-35w.3.4","title":"Batching tests + micro-bench","description":"Deliverables:\n- Unit tests verifying batch write counts, flush timing, and error fallback to direct insert.\n- Small benchmark or perf test for event throughput.\n- Test logs must include batch sizes, flush intervals, and observed event counts.\n","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-17T16:00:47.929383387-06:00","created_by":"ubuntu","updated_at":"2026-01-19T22:06:40.425368557-06:00","closed_at":"2026-01-19T22:06:40.425368557-06:00","close_reason":"Added 7 unit tests for write_sqlite_batch function: empty batch handling, single/multiple event writes, data preservation, duration storage for close events, multiple batch accumulation, and run_id consistency. Tests verify batch write counts and data integrity.","dependencies":[{"issue_id":"rust_agent_network_observer-35w.3.4","depends_on_id":"rust_agent_network_observer-35w.3","type":"parent-child","created_at":"2026-01-17T16:00:47.930653888-06:00","created_by":"ubuntu"},{"issue_id":"rust_agent_network_observer-35w.3.4","depends_on_id":"rust_agent_network_observer-35w.3.2","type":"blocks","created_at":"2026-01-17T16:00:47.932853887-06:00","created_by":"ubuntu"}]}
{"id":"rust_agent_network_observer-35w.3.5","title":"Docs update: performance flags","description":"Deliverables:\n- README section describing batching flags, defaults, and when to tune.\n- Document the load-test e2e script and the expected log markers.\n","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-17T16:00:47.967654393-06:00","created_by":"ubuntu","updated_at":"2026-01-19T22:08:21.372596563-06:00","closed_at":"2026-01-19T22:08:21.372596563-06:00","close_reason":"Added documentation to README: report command section with examples and time range formats; SQLite batching performance tuning guide with table.","dependencies":[{"issue_id":"rust_agent_network_observer-35w.3.5","depends_on_id":"rust_agent_network_observer-35w.3","type":"parent-child","created_at":"2026-01-17T16:00:47.96896593-06:00","created_by":"ubuntu"},{"issue_id":"rust_agent_network_observer-35w.3.5","depends_on_id":"rust_agent_network_observer-35w.3.3","type":"blocks","created_at":"2026-01-17T16:00:47.971197688-06:00","created_by":"ubuntu"},{"issue_id":"rust_agent_network_observer-35w.3.5","depends_on_id":"rust_agent_network_observer-35w.3.4","type":"blocks","created_at":"2026-01-17T16:00:47.992173732-06:00","created_by":"ubuntu"},{"issue_id":"rust_agent_network_observer-35w.3.5","depends_on_id":"rust_agent_network_observer-35w.3.6","type":"blocks","created_at":"2026-01-17T16:04:45.356843177-06:00","created_by":"ubuntu"}]}
{"id":"rust_agent_network_observer-35w.3.6","title":"E2E: batching under load","description":"Deliverables:\n- E2E script that simulates high-rate events, validates sqlite counts vs emitted events.\n- Use shared e2e harness/log format.\n- Log file must include: event rate, batch sizes, flush timings, and final counts.\n","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-17T16:04:02.809659097-06:00","created_by":"ubuntu","updated_at":"2026-01-19T22:03:34.018409298-06:00","closed_at":"2026-01-19T22:03:34.018409298-06:00","close_reason":"Created tests/e2e/batching-under-load.sh with load test (50 connections), SQLite validation, batch config verification, and queue overflow handling. Test validates: JSON/SQLite event count consistency, session recording, run_id consistency, and batch config flags.","dependencies":[{"issue_id":"rust_agent_network_observer-35w.3.6","depends_on_id":"rust_agent_network_observer-35w.3","type":"parent-child","created_at":"2026-01-17T16:04:02.810934126-06:00","created_by":"ubuntu"},{"issue_id":"rust_agent_network_observer-35w.3.6","depends_on_id":"rust_agent_network_observer-35w.3.2","type":"blocks","created_at":"2026-01-17T16:04:02.813658749-06:00","created_by":"ubuntu"},{"issue_id":"rust_agent_network_observer-35w.3.6","depends_on_id":"rust_agent_network_observer-35w.3.3","type":"blocks","created_at":"2026-01-17T16:04:02.816275522-06:00","created_by":"ubuntu"},{"issue_id":"rust_agent_network_observer-35w.3.6","depends_on_id":"rust_agent_network_observer-35w.7","type":"blocks","created_at":"2026-01-17T16:06:02.283675743-06:00","created_by":"ubuntu"}]}
{"id":"rust_agent_network_observer-35w.4","title":"Configurable provider mapping via rano.toml","description":"Purpose:\n- Allow users to add/override provider patterns without recompiling.\n\nUser impact:\n- Works with custom wrappers or corporate CLI launchers.\n\nTesting:\n- Unit tests for config parsing/merge rules.\n- E2E script that exercises overrides and logs classification output.\n","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-17T16:00:48.032627504-06:00","created_by":"ubuntu","updated_at":"2026-01-19T22:08:53.228752088-06:00","closed_at":"2026-01-19T22:08:53.228752088-06:00","close_reason":"All implementation subtasks complete (config schema, loading, provider matching, E2E test). Only P3 docs task remaining.","dependencies":[{"issue_id":"rust_agent_network_observer-35w.4","depends_on_id":"rust_agent_network_observer-35w","type":"parent-child","created_at":"2026-01-17T16:00:48.033951935-06:00","created_by":"ubuntu"}]}
{"id":"rust_agent_network_observer-35w.4.1","title":"Define config schema + merge rules","description":"Deliverables:\n- TOML schema for providers/patterns.\n- Merge strategy: defaults + user overrides.\n- Define config precedence (cwd -\u003e XDG config -\u003e home) and env overrides.\n","design":"Drafted provider config schema and merge rules in docs/provider-config.md; added README pointer.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-17T16:00:48.072128766-06:00","created_by":"ubuntu","updated_at":"2026-01-17T18:03:57.434556911-06:00","closed_at":"2026-01-17T18:03:57.434556911-06:00","close_reason":"Closed","dependencies":[{"issue_id":"rust_agent_network_observer-35w.4.1","depends_on_id":"rust_agent_network_observer-35w.4","type":"parent-child","created_at":"2026-01-17T16:00:48.07340579-06:00","created_by":"ubuntu"}]}
{"id":"rust_agent_network_observer-35w.4.2","title":"Implement config loading","description":"Deliverables:\n- Read `rano.toml` from cwd + XDG config + home config paths.\n- Validation + error handling with safe fallback.\n- Support environment override for config path.\n","notes":"Implemented multi-file provider config loading with precedence (home/xdg/cwd -\u003e --config-toml -\u003e RANO_CONFIG_TOML), safe warnings on missing explicit paths, and per-file merge/replace semantics. Updated docs/provider-config.md + README pointer. Tests: cargo test -q.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-17T16:00:48.109375198-06:00","created_by":"ubuntu","updated_at":"2026-01-17T18:05:02.315134913-06:00","closed_at":"2026-01-17T18:05:02.315134913-06:00","close_reason":"Closed","dependencies":[{"issue_id":"rust_agent_network_observer-35w.4.2","depends_on_id":"rust_agent_network_observer-35w.4","type":"parent-child","created_at":"2026-01-17T16:00:48.110675945-06:00","created_by":"ubuntu"},{"issue_id":"rust_agent_network_observer-35w.4.2","depends_on_id":"rust_agent_network_observer-35w.4.1","type":"blocks","created_at":"2026-01-17T16:00:48.113119997-06:00","created_by":"ubuntu"}]}
{"id":"rust_agent_network_observer-35w.4.3","title":"Provider matching updates","description":"Deliverables:\n- Apply configured patterns for provider classification.\n- Allow custom provider labels if desired.\n","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-17T16:00:48.146506575-06:00","created_by":"ubuntu","updated_at":"2026-01-19T20:33:25.985742404-06:00","closed_at":"2026-01-19T20:33:25.985742404-06:00","close_reason":"Provider pattern matching from TOML config is fully implemented and tested. Custom provider labels marked as 'if desired' (optional) - deferring to backlog.","dependencies":[{"issue_id":"rust_agent_network_observer-35w.4.3","depends_on_id":"rust_agent_network_observer-35w.4","type":"parent-child","created_at":"2026-01-17T16:00:48.147777357-06:00","created_by":"ubuntu"},{"issue_id":"rust_agent_network_observer-35w.4.3","depends_on_id":"rust_agent_network_observer-35w.4.2","type":"blocks","created_at":"2026-01-17T16:00:48.150131843-06:00","created_by":"ubuntu"}]}
{"id":"rust_agent_network_observer-35w.4.4","title":"Config tests + docs","description":"Deliverables:\n- Unit tests for config overrides, invalid config handling, and merge precedence.\n- README snippet with example `rano.toml` and expected provider classification behavior.\n- Document the config e2e script and sample log output for verification.\n- Test logs must include config inputs and resolved provider mappings.\n","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-17T16:00:48.186410977-06:00","created_by":"ubuntu","updated_at":"2026-01-19T22:11:21.673046188-06:00","closed_at":"2026-01-19T22:11:21.673046188-06:00","close_reason":"Added unit tests for config: merge_mode_preserves_unspecified_providers, invalid_mode_returns_error, empty_patterns_are_filtered_out, provider_from_text_returns_unknown_for_no_match, provider_from_text_matches_case_insensitive. Added README section for rano.toml with example config, modes explanation, default patterns table, and verification command.","dependencies":[{"issue_id":"rust_agent_network_observer-35w.4.4","depends_on_id":"rust_agent_network_observer-35w.4","type":"parent-child","created_at":"2026-01-17T16:00:48.187726552-06:00","created_by":"ubuntu"},{"issue_id":"rust_agent_network_observer-35w.4.4","depends_on_id":"rust_agent_network_observer-35w.4.3","type":"blocks","created_at":"2026-01-17T16:00:48.190279947-06:00","created_by":"ubuntu"},{"issue_id":"rust_agent_network_observer-35w.4.4","depends_on_id":"rust_agent_network_observer-35w.4.5","type":"blocks","created_at":"2026-01-17T16:04:45.386204505-06:00","created_by":"ubuntu"}]}
{"id":"rust_agent_network_observer-35w.4.5","title":"E2E: provider config override","description":"Deliverables:\n- E2E script that loads a `rano.toml` override and verifies provider classification in output.\n- Use shared e2e harness/log format.\n- Log file must include: config contents, expected provider, actual provider lines.\n","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-17T16:04:02.853805681-06:00","created_by":"ubuntu","updated_at":"2026-01-19T20:52:35.872856568-06:00","closed_at":"2026-01-19T20:52:35.872856568-06:00","close_reason":"E2E test implemented and passing. Test verifies: 1) Config TOML loading from --config-toml, 2) Provider pattern replacement (mode=replace), 3) Custom pattern matching (probecli -\u003e openai), 4) Connection attribution with custom provider. Test runs against pre-built binary for speed.","dependencies":[{"issue_id":"rust_agent_network_observer-35w.4.5","depends_on_id":"rust_agent_network_observer-35w.4","type":"parent-child","created_at":"2026-01-17T16:04:02.855198599-06:00","created_by":"ubuntu"},{"issue_id":"rust_agent_network_observer-35w.4.5","depends_on_id":"rust_agent_network_observer-35w.4.2","type":"blocks","created_at":"2026-01-17T16:04:02.858298519-06:00","created_by":"ubuntu"},{"issue_id":"rust_agent_network_observer-35w.4.5","depends_on_id":"rust_agent_network_observer-35w.4.3","type":"blocks","created_at":"2026-01-17T16:04:02.861400584-06:00","created_by":"ubuntu"},{"issue_id":"rust_agent_network_observer-35w.4.5","depends_on_id":"rust_agent_network_observer-35w.7","type":"blocks","created_at":"2026-01-17T16:06:02.314981112-06:00","created_by":"ubuntu"}]}
{"id":"rust_agent_network_observer-35w.5","title":"Enhanced live stats panels","description":"Purpose:\n- Make live monitoring more compelling and informative.\n\nUser impact:\n- Quick at-a-glance view of top domains/ports/processes by provider.\n\nTesting:\n- Unit tests for aggregation + rendering.\n- E2E script that runs live stats views and captures output logs.\n","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-17T16:00:48.227056245-06:00","created_by":"ubuntu","updated_at":"2026-02-13T02:43:24.06276951-06:00","closed_at":"2026-01-21T22:35:37.503850782Z","dependencies":[{"issue_id":"rust_agent_network_observer-35w.5","depends_on_id":"rust_agent_network_observer-35w","type":"parent-child","created_at":"2026-01-17T16:00:48.228334381-06:00","created_by":"ubuntu"}]}
{"id":"rust_agent_network_observer-35w.5.1","title":"Design stats views + CLI flags","description":"Deliverables:\n- `--stats-view provider|domain|port|process` and `--stats-cycle-ms` definitions.\n- Decide top-N defaults and formatting.\n- Define terminal-width handling and non-tty fallback behavior.\n","design":"Stats views + CLI flag design\\n\\nFlags\\n- --stats-view \u003cprovider|domain|port|process\u003e (repeatable).\\n  - If omitted: default view list = [provider].\\n  - If provided multiple times: cycle only those views (preserve order).\\n- --stats-cycle-ms \u003cms\u003e (default 0/off). When \u003e0 and stats enabled, rotate views at this interval.\\n- Existing --stats-interval-ms controls refresh cadence; cycle is independent (switch view on next refresh after cycle elapses).\\n\\nTop-N + formatting\\n- Reuse --stats-top (default 5) for domain/port/process lists.\\n- Provider view shows all providers with bars.\\n- Domain view: top domains by count; include provider aggregate counts in parentheses if available.\\n- Port view: top remote ports by count; optionally show proto.\\n- Process view: top comm names by count.\\n\\nTerminal width / TTY behavior\\n- If stdout is TTY: compute bar width from --stats-width if set, else from COLUMNS (clamped 20..80).\\n- If stdout is NOT TTY: suppress live stats by default; only print final summary (current behavior) or emit compact one-line stats per interval if --stats-interval-ms \u003e 0 and --summary-only=false.\\n- When --json is set: disable live stats output regardless of view/cycle.\\n\\nNotes\\n- Views should render as distinct sections with a short header (e.g., \"Live Stats [domain]\").\\n- Cycling should be no-op if stats interval is 0 or summary-only is enabled.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-17T16:00:48.264069984-06:00","created_by":"ubuntu","updated_at":"2026-01-17T18:05:08.89551621-06:00","closed_at":"2026-01-17T18:05:08.89551621-06:00","close_reason":"Closed","dependencies":[{"issue_id":"rust_agent_network_observer-35w.5.1","depends_on_id":"rust_agent_network_observer-35w.5","type":"parent-child","created_at":"2026-01-17T16:00:48.265374369-06:00","created_by":"ubuntu"}]}
{"id":"rust_agent_network_observer-35w.5.2","title":"Implement stats aggregation for views","description":"Deliverables:\n- In-memory counters for top-N domains/ports/processes.\n- Optional SQLite-backed view for large counts.\n","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-17T16:00:48.300895163-06:00","created_by":"ubuntu","updated_at":"2026-01-20T19:07:32.570119657-06:00","closed_at":"2026-01-20T19:07:32.570119657-06:00","close_reason":"Added per-port in-memory stats aggregation; domains/processes were already tracked.","dependencies":[{"issue_id":"rust_agent_network_observer-35w.5.2","depends_on_id":"rust_agent_network_observer-35w.5","type":"parent-child","created_at":"2026-01-17T16:00:48.302115511-06:00","created_by":"ubuntu"},{"issue_id":"rust_agent_network_observer-35w.5.2","depends_on_id":"rust_agent_network_observer-35w.5.1","type":"blocks","created_at":"2026-01-17T16:00:48.304599037-06:00","created_by":"ubuntu"}]}
{"id":"rust_agent_network_observer-35w.5.3","title":"Render live panels","description":"Deliverables:\n- Colorized bar charts per view with clear headers.\n- Stable output for terminal log capture.\n- Auto-adjust to terminal width; degrade to fixed width when non-tty.\n","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-17T16:00:48.340807559-06:00","created_by":"ubuntu","updated_at":"2026-01-20T19:14:52.010573432-06:00","closed_at":"2026-01-20T19:14:52.010573432-06:00","close_reason":"Implemented stats views (provider/domain/port/process), cycling, and width auto-sizing; updated help and tests pass.","dependencies":[{"issue_id":"rust_agent_network_observer-35w.5.3","depends_on_id":"rust_agent_network_observer-35w.5","type":"parent-child","created_at":"2026-01-17T16:00:48.342544938-06:00","created_by":"ubuntu"},{"issue_id":"rust_agent_network_observer-35w.5.3","depends_on_id":"rust_agent_network_observer-35w.5.2","type":"blocks","created_at":"2026-01-17T16:00:48.345977908-06:00","created_by":"ubuntu"}]}
{"id":"rust_agent_network_observer-35w.5.4","title":"Stats panel tests + docs","description":"Deliverables:\n- Unit tests for stats aggregation and rendering (provider/domain/port/process views).\n- Snapshot-like rendering tests with deterministic output.\n- README update with view examples and expected output.\n- Document the stats e2e script and where output logs are stored.\n- Test logs must capture inputs, computed top-N lists, and rendered lines.\n","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-17T16:00:48.381215006-06:00","created_by":"ubuntu","updated_at":"2026-02-13T02:43:24.064189069-06:00","closed_at":"2026-01-21T21:35:45.925360399Z","dependencies":[{"issue_id":"rust_agent_network_observer-35w.5.4","depends_on_id":"rust_agent_network_observer-35w.5","type":"parent-child","created_at":"2026-01-17T16:00:48.382442968-06:00","created_by":"ubuntu"},{"issue_id":"rust_agent_network_observer-35w.5.4","depends_on_id":"rust_agent_network_observer-35w.5.3","type":"blocks","created_at":"2026-01-17T16:00:48.385009588-06:00","created_by":"ubuntu"},{"issue_id":"rust_agent_network_observer-35w.5.4","depends_on_id":"rust_agent_network_observer-35w.5.5","type":"blocks","created_at":"2026-01-17T16:04:45.415856934-06:00","created_by":"ubuntu"}]}
{"id":"rust_agent_network_observer-35w.5.5","title":"E2E: live stats views rotation","description":"Deliverables:\n- E2E script that runs stats views (provider/domain/port/process) and captures output.\n- Use shared e2e harness/log format.\n- Log file must include: view sequence, sample outputs, and any rendering warnings.\n","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-17T16:04:02.895929216-06:00","created_by":"ubuntu","updated_at":"2026-01-20T19:18:17.912972567-06:00","closed_at":"2026-01-20T19:18:17.912972567-06:00","close_reason":"Added E2E stats views cycle test using harness; validates provider/domain/port/process headers and logs view sequence.","dependencies":[{"issue_id":"rust_agent_network_observer-35w.5.5","depends_on_id":"rust_agent_network_observer-35w.5","type":"parent-child","created_at":"2026-01-17T16:04:02.89717476-06:00","created_by":"ubuntu"},{"issue_id":"rust_agent_network_observer-35w.5.5","depends_on_id":"rust_agent_network_observer-35w.5.3","type":"blocks","created_at":"2026-01-17T16:04:02.899979973-06:00","created_by":"ubuntu"},{"issue_id":"rust_agent_network_observer-35w.5.5","depends_on_id":"rust_agent_network_observer-35w.7","type":"blocks","created_at":"2026-01-17T16:06:02.343091935-06:00","created_by":"ubuntu"}]}
{"id":"rust_agent_network_observer-35w.6","title":"Secondary ideas backlog (documented)","description":"Purpose:\n- Preserve the remaining 25 ideas in a self-contained bead so future work doesn’t need the original plan.\n- These are valuable but lower priority vs the top 5.\n\nIdeas:\n1) Resolver cache with TTL for PTR.\n2) Focus mode for new connections in a time window.\n3) Session replay summary from SQLite.\n4) UDP deduping window to reduce noise.\n5) Ignore localhost/private IP toggles.\n6) Provider confidence indicator.\n7) Process tree display at startup.\n8) Minimal quiet mode.\n9) Full-screen TUI.\n10) CSV/JSON export of stats.\n11) Include/Exclude CIDR filter flags.\n12) Permission diagnostics for /proc issues.\n13) SQLite rotation / retention controls.\n14) `--pid` direct tracking.\n15) macOS/Windows support via native APIs.\n16) Auto-detect terminal width for bars.\n17) SNI mapping decay policy controls.\n18) DoH resolver option.\n19) Replace manual /proc parsing with `procfs` crate.\n20) Summarized exit report (top N, totals).\n21) Live \"last 5 minutes\" window view.\n22) Multi-panel paging + hotkeys.\n23) Per-provider allow/deny lists.\n24) Log JSON schema versioning.\n25) Health check subcommand.\n\nGuidance:\n- Each idea can be promoted to its own feature/task bead when prioritized.\n- Consider grouping by UX, performance, portability.\n","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-17T16:00:48.421314069-06:00","created_by":"ubuntu","updated_at":"2026-02-13T02:43:24.065573662-06:00","closed_at":"2026-01-21T22:37:18.087960325Z","dependencies":[{"issue_id":"rust_agent_network_observer-35w.6","depends_on_id":"rust_agent_network_observer-35w","type":"parent-child","created_at":"2026-01-17T16:00:48.422656413-06:00","created_by":"ubuntu"}]}
{"id":"rust_agent_network_observer-35w.7","title":"Test harness + logging standard for E2E","description":"Purpose:\n- Ensure every e2e script has consistent, high-signal logging and reproducible behavior.\n\nDeliverables:\n- Shared e2e runner (shell or Rust) that standardizes log format:\n  - header with timestamp, host, OS, rano version, args\n  - inputs/fixtures summary\n  - expected outputs\n  - actual outputs (truncated with pointers)\n  - pass/fail summary\n- Standard log location convention (e.g., `logs/e2e/\u003ctest-name\u003e-\u003cts\u003e.log`).\n- Helper functions for asserting output (string/regex) with detailed diffs.\n\nNotes:\n- Keep runner minimal; do not require elevated privileges.\n- All e2e beads must depend on this harness.\n","notes":"Added E2E harness: scripts/e2e/run.sh + scripts/e2e/lib.sh with standard log header, log dir logs/e2e/\u003cname\u003e-\u003cts\u003e.log, outputs captured in logs/e2e/outputs. Helpers: e2e_run + assert_status/contains/regex/eq with truncated output and pointers. Added scripts/e2e/README.md. Ran: bash -n scripts/e2e/lib.sh scripts/e2e/run.sh","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-17T16:05:55.459939975-06:00","created_by":"ubuntu","updated_at":"2026-01-17T18:04:11.342481022-06:00","closed_at":"2026-01-17T18:04:11.342481022-06:00","close_reason":"Closed","dependencies":[{"issue_id":"rust_agent_network_observer-35w.7","depends_on_id":"rust_agent_network_observer-35w","type":"parent-child","created_at":"2026-01-17T16:05:55.469979059-06:00","created_by":"ubuntu"}]}
{"id":"rust_agent_network_observer-36b","title":"Shell prompt integration","description":"Purpose:\n- Provide one-line status for embedding in shell prompts (PS1, starship)\n- Always-visible network status without dedicating a terminal\n\nUser impact:\n- Prompt shows: '🔵 3 active | anthropic:45 openai:12'\n- Instant awareness of AI network activity\n- Configurable format for different prompt systems\n\nFeatures:\n- rano status --one-line: output for prompt embedding\n- rano status --format \u003ctemplate\u003e: custom format string\n- Fast execution (\u003c50ms) for prompt responsiveness\n- Read from SQLite or shared state file\n\nTemplate variables:\n- {active}: current active connection count\n- {total}: total connections this session\n- {anthropic}, {openai}, {google}: per-provider counts\n- {last_domain}: most recent domain\n- {session_name}: current session name\n\nDefault format: '{active} active | anthropic:{anthropic} openai:{openai}'\n\nImplementation:\n- Query latest session from SQLite\n- Cache results for 1s to avoid repeated queries\n- Optional daemon mode for even faster response\n\nTesting:\n- Unit tests for template expansion\n- E2E script verifying output format\n- Benchmark: must complete in \u003c50ms","status":"closed","priority":4,"issue_type":"feature","created_at":"2026-01-21T05:07:36.403153804Z","created_by":"ubuntu","updated_at":"2026-01-22T06:35:08.302834964Z","closed_at":"2026-01-22T06:35:08.302632042Z","close_reason":"done","dependencies":[{"issue_id":"rust_agent_network_observer-36b","depends_on_id":"rust_agent_network_observer-3o1","type":"parent-child","created_at":"2026-01-21T05:07:36.420930913Z","created_by":"ubuntu"}]}
{"id":"rust_agent_network_observer-3dy","title":"Implement retry detection logic","description":"Deliverables:\n- RetryTracker struct:\n  - recent: HashMap\u003c(IpAddr, u16, u32), Vec\u003cInstant\u003e\u003e\n  - threshold: usize (default 3)\n  - window_ms: u64 (default 60000)\n\n- track_connection(key: \u0026ConnKey, pid: u32) -\u003e Option\u003cRetryWarning\u003e:\n  - Add current timestamp to Vec for (ip, port, pid)\n  - Prune entries older than window_ms\n  - If count \u003e= threshold, return warning\n\n- RetryWarning struct:\n  - count: usize\n  - window_seconds: f64\n  - endpoint: (IpAddr, u16)\n\n- Integration: call after close event detection","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-21T05:09:44.229045587Z","created_by":"ubuntu","updated_at":"2026-01-21T20:42:52.524153483Z","closed_at":"2026-01-21T20:42:52.524109651Z","close_reason":"Implemented RetryTracker struct with track_connection method as specified. RetryWarning struct with count, window_seconds, and endpoint fields. Includes prune_stale method for memory management. Tests pass, code compiles. Integration into main loop and CLI flags are in dependent bead bd-90z.","dependencies":[{"issue_id":"rust_agent_network_observer-3dy","depends_on_id":"rust_agent_network_observer-1i6","type":"parent-child","created_at":"2026-01-21T05:09:44.287016248Z","created_by":"ubuntu"}]}
{"id":"rust_agent_network_observer-3o1","title":"rano v2: alerting, export, UX improvements","description":"Goals:\n- Add proactive alerting capabilities for security monitoring\n- Enable data export for integration with external tools\n- Improve UX with presets, ancestry display, and accessibility\n- Reduce friction through config validation and session naming\n\nContext:\n- Current rano is observation-only; users must watch output constantly\n- SQLite data is locked inside; no easy export to CSV/Pandas/grep\n- Config debugging requires trial-and-error runs\n- Session IDs are opaque (PID-timestamp) not human-readable\n\nScope:\n- 5 prioritized features with comprehensive tests and documentation\n- Each feature is independent but builds on existing infrastructure\n- Preserve all existing CLI behavior; improvements are additive\n\nQuality bar:\n- Every feature must include unit tests and at least one e2e test script\n- E2E scripts must use the existing harness (scripts/e2e/lib.sh)\n- Tests must run offline without elevated privileges\n- Documentation updates for README and --help text\n\nAcceptance:\n- Each child feature has tasks with unit tests + e2e scripts + docs\n- All new flags documented in README\n- Config validation catches common errors before runtime","status":"closed","priority":1,"issue_type":"epic","created_at":"2026-01-21T05:00:06.726854553Z","created_by":"ubuntu","updated_at":"2026-01-22T06:36:10.708582229Z","closed_at":"2026-01-22T06:36:10.708519481Z","close_reason":"All child features complete: Export (bd-1vz), Alerts (bd-2iu), Config validation (bd-n2d), Presets (bd-26d), Process ancestry (bd-1ju), Session diff (bd-1o5), Colorblind themes (bd-1lq), Session naming (bd-q9u), Retry detection (bd-1i6), Shell prompt integration (bd-36b)."}
{"id":"rust_agent_network_observer-3t7","title":"Implement preset loading","description":"Deliverables:\n- PresetLoader struct:\n  - builtin_presets: HashMap\u003c\u0026'static str, \u0026'static str\u003e (name -\u003e content)\n  - user_preset_dirs: Vec\u003cPathBuf\u003e\n\n- load_preset(name) -\u003e Result\u003cHashMap\u003cString, String\u003e\u003e:\n  1. Check builtin_presets first\n  2. Search user_preset_dirs for \u003cname\u003e.conf\n  3. Parse as key=value, return HashMap\n\n- Integration with config loading:\n  1. Parse --preset flags early\n  2. For each preset (in order):\n     - Load preset config\n     - Merge into base config\n  3. Apply remaining CLI flags (override)\n\n- list_presets() -\u003e Vec\u003cPresetInfo\u003e:\n  - Scan builtin + user dirs\n  - Extract description from first line comment (# Description: ...)\n  - Format for --list-presets output\n\n- Built-in preset contents (as static strings):\n  - PRESET_AUDIT, PRESET_QUIET, PRESET_LIVE, PRESET_VERBOSE","design":"Built-in preset definitions:\n\n# audit.conf - Security auditing workflow\n# Description: Full logging for security audits\njson=true\nlog_dir=/tmp/rano-audit\nno_dns=false\nstats_interval_ms=0\nshow_ancestry=true\n\n# quiet.conf - Minimal output\n# Description: Summary only, no live output\nsummary_only=true\nstats_interval_ms=0\nno_banner=true\n\n# live.conf - Real-time monitoring focus\n# Description: Frequent stats, no SQLite overhead\nstats_interval_ms=1000\nstats_width=80\nno_sqlite=true\nstats_view=domain\n\n# verbose.conf - Maximum detail\n# Description: All information, all protocols\nshow_ancestry=true\ninclude_udp=true\ninclude_listening=true\nstats_interval_ms=2000\n\nSearch order:\n1. ~/.config/rano/presets/\u003cname\u003e.conf\n2. /etc/rano/presets/\u003cname\u003e.conf (system-wide)\n3. Built-in (compiled in)","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-21T05:05:49.958498465Z","created_by":"ubuntu","updated_at":"2026-01-21T11:08:43.687648105Z","closed_at":"2026-01-21T11:08:43.687607859Z","close_reason":"Implemented PresetLoader with 4 builtin presets (audit, quiet, live, verbose), load_preset(), list_presets(), apply_preset_values(), and CLI flags --preset/--list-presets. Presets merge in order (later wins). All 78 tests pass.","dependencies":[{"issue_id":"rust_agent_network_observer-3t7","depends_on_id":"rust_agent_network_observer-26d","type":"parent-child","created_at":"2026-01-21T05:05:49.987421243Z","created_by":"ubuntu"},{"issue_id":"rust_agent_network_observer-3t7","depends_on_id":"rust_agent_network_observer-db8","type":"blocks","created_at":"2026-01-21T05:06:02.835734189Z","created_by":"ubuntu"}]}
{"id":"rust_agent_network_observer-52z","title":"Implement config validation logic","description":"Deliverables:\n- ConfigValidator struct:\n  - errors: Vec\u003cConfigError\u003e\n  - warnings: Vec\u003cConfigWarning\u003e\n\n- validate_config_file(path) -\u003e ValidationResult:\n  - Parse as key=value\n  - Check each key against known_keys set\n  - Validate value types per key\n  - Compile patterns to catch regex errors\n\n- validate_toml_config(path) -\u003e ValidationResult:\n  - Parse as TOML\n  - Check [providers] section structure\n  - Validate mode is 'merge' or 'replace'\n  - Check pattern arrays are strings\n\n- validate_paths(config) -\u003e ValidationResult:\n  - log_dir: directory exists or can be created\n  - sqlite: parent directory exists\n  - config files: exist if explicitly specified\n\n- validate_patterns(config) -\u003e ValidationResult:\n  - Compile all pattern/exclude_pattern as regex/glob\n  - Report syntax errors with pattern text\n\n- ValidationResult:\n  - is_valid: bool (no errors)\n  - errors: Vec\u003c(file, line, message)\u003e\n  - warnings: Vec\u003c(file, line, message)\u003e","design":"Known config keys (for typo detection):\n# Process selection\npattern, exclude_pattern, pid, no_descendants\n\n# Polling\ninterval_ms, once\n\n# Output\njson, summary_only, color, log_file, log_dir, log_format, no_color, no_banner, theme\n\n# Domain resolution\nno_dns, domain_mode, pcap, include_udp, no_udp, include_listening\n\n# SQLite\nsqlite, no_sqlite, db_batch_size, db_flush_ms, db_queue_max\n\n# Stats\nstats_interval_ms, stats_width, stats_top, stats_view, stats_cycle_ms\n\n# Alerts (new)\nalert_domain, alert_max_connections, alert_max_per_provider, alert_duration_ms, alert_unknown_domain, alert_bell, alert_cooldown_ms\n\n# Presets (new)\npreset\n\nValue type validation:\n- _ms, _size, _max, _top, _width: positive integer\n- pattern, exclude_pattern: compilable regex/glob\n- color, log_format, domain_mode, theme: enum values\n- Boolean keys: true/false","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-21T05:06:21.748149071Z","created_by":"ubuntu","updated_at":"2026-01-21T17:23:51.994618802Z","closed_at":"2026-01-21T17:23:51.99457524Z","close_reason":"done","dependencies":[{"issue_id":"rust_agent_network_observer-52z","depends_on_id":"rust_agent_network_observer-n2d","type":"parent-child","created_at":"2026-01-21T05:06:21.762516839Z","created_by":"ubuntu"}]}
{"id":"rust_agent_network_observer-90z","title":"Retry detection CLI and tests","description":"Deliverables:\n- CLI flags: --retry-threshold \u003cN\u003e, --retry-window-ms \u003cN\u003e\n- Config keys: retry_threshold, retry_window_ms\n- Warning output format: '⚠ Retry pattern: N connections to IP:port in Xs'\n- SQLite: add retry_count column to events (for close events)\n\n- Unit tests:\n  - test_retry_detection_triggers_at_threshold()\n  - test_retry_detection_window_expiry()\n  - test_retry_detection_per_endpoint()\n\n- E2E test: simulate rapid reconnects, verify warnings","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-21T05:10:15.710962523Z","created_by":"ubuntu","updated_at":"2026-01-21T21:17:15.761860755Z","closed_at":"2026-01-21T21:17:15.761801533Z","close_reason":"Implemented retry detection CLI and tests:\n- Added CLI flags: --retry-threshold, --retry-window-ms\n- Added config keys: retry_threshold, retry_window_ms\n- Added retry_count column to SQLite events table\n- Integrated RetryTracker into main loop with warning output\n- Warning format: '⚠ Retry pattern: N connections to IP:port in Xs'\n- Added 3 unit tests: threshold trigger, window expiry, per-endpoint tracking\nAll 113 tests pass.","dependencies":[{"issue_id":"rust_agent_network_observer-90z","depends_on_id":"rust_agent_network_observer-1i6","type":"parent-child","created_at":"2026-01-21T05:10:15.753292539Z","created_by":"ubuntu"},{"issue_id":"rust_agent_network_observer-90z","depends_on_id":"rust_agent_network_observer-3dy","type":"blocks","created_at":"2026-01-21T05:10:49.214275153Z","created_by":"ubuntu"}]}
{"id":"rust_agent_network_observer-94z","title":"Ancestry tests and documentation","description":"Deliverables:\n- Unit tests:\n  - test_read_ancestry_single_level() - process with no parent\n  - test_read_ancestry_multi_level() - 3+ level chain\n  - test_ancestry_cache_hit() - cached value returned\n  - test_ancestry_cache_staleness() - recompute on comm mismatch\n  - test_format_ancestry_truncation() - \u003e5 levels truncated\n\n- E2E test script (tests/e2e/process-ancestry.sh):\n  - Create nested process tree: bash → sleep (to simulate claude)\n  - Run rano --show-ancestry --pid \u003csleep_pid\u003e\n  - Verify ancestry displayed in output\n  - Verify ancestry stored in SQLite\n  - Verify report shows parent breakdown\n  - Log: process tree, expected ancestry, actual output\n\n- Documentation:\n  - README section: 'Process Ancestry'\n  - Use case: debugging agent swarms\n  - Example output with ancestry\n  - Performance note: caching behavior","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-21T05:03:51.718741595Z","created_by":"ubuntu","updated_at":"2026-01-21T11:04:12.226700916Z","closed_at":"2026-01-21T11:04:12.226658195Z","close_reason":"Add ancestry tests and documentation: 21 unit tests for ancestry formatting/caching, E2E test script process-ancestry.sh, and comprehensive README section","dependencies":[{"issue_id":"rust_agent_network_observer-94z","depends_on_id":"rust_agent_network_observer-1ju","type":"parent-child","created_at":"2026-01-21T05:03:51.785639198Z","created_by":"ubuntu"},{"issue_id":"rust_agent_network_observer-94z","depends_on_id":"rust_agent_network_observer-15l","type":"blocks","created_at":"2026-01-21T05:04:18.654742192Z","created_by":"ubuntu"}]}
{"id":"rust_agent_network_observer-b6k","title":"Config validation tests and documentation","description":"Deliverables:\n- Unit tests:\n  - test_validate_valid_config() - no errors for good config\n  - test_validate_unknown_key() - warning for typo\n  - test_validate_invalid_number() - error for non-numeric\n  - test_validate_invalid_pattern() - error for bad regex\n  - test_validate_missing_path() - warning for nonexistent log_dir\n  - test_validate_toml_invalid_mode() - error for bad mode\n  - test_config_show_output() - correct format\n\n- E2E test script (tests/e2e/config-validation.sh):\n  - Create valid config, verify exit 0\n  - Create config with unknown key, verify warning\n  - Create config with invalid pattern, verify error\n  - Create config with invalid TOML, verify error\n  - Test 'rano config show' output format\n  - Test 'rano config paths' lists correct paths\n  - Log: config content, expected errors, actual output\n\n- Documentation:\n  - README section: 'Configuration Validation'\n  - Example: 'rano config check' workflow\n  - Error message reference\n  - Troubleshooting common issues","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-21T05:06:39.771915161Z","created_by":"ubuntu","updated_at":"2026-01-21T21:44:06.244975214Z","closed_at":"2026-01-21T21:44:06.244465324Z","close_reason":"Added E2E test script for config validation (config-validation.sh). Added comprehensive README section documenting config check/show/paths commands, validation output format, and common issues.","dependencies":[{"issue_id":"rust_agent_network_observer-b6k","depends_on_id":"rust_agent_network_observer-n2d","type":"parent-child","created_at":"2026-01-21T05:06:39.785942076Z","created_by":"ubuntu"},{"issue_id":"rust_agent_network_observer-b6k","depends_on_id":"rust_agent_network_observer-300","type":"blocks","created_at":"2026-01-21T05:06:44.985422268Z","created_by":"ubuntu"}]}
{"id":"rust_agent_network_observer-bca","title":"Add pcap DNS/SNI capture support","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-17T16:59:10.792984936-06:00","created_by":"ubuntu","updated_at":"2026-02-13T02:43:24.067067047-06:00","closed_at":"2026-01-22T03:14:01.1471904Z"}
{"id":"rust_agent_network_observer-c96","title":"Fix clippy warnings (76 errors with -D warnings)","description":"Clippy fails when run with -D warnings flag. Need to fix:\n- single_char_add_str: Use push() instead of push_str() for single chars\n- collapsible_if: Collapse nested if statements\n- dead_code: Remove or annotate unused functions/methods\n- unnecessary_get_then_check: Use contains_key() instead of get().is_some()\n\nThis is important for CI and code quality.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-22T07:49:10.296139855Z","created_by":"ubuntu","updated_at":"2026-01-22T08:17:33.097204802Z","closed_at":"2026-01-22T08:17:33.097052976Z","close_reason":"Fixed all clippy warnings. Code now passes cargo clippy -- -D warnings. All 164 tests pass."}
{"id":"rust_agent_network_observer-db8","title":"Design preset system","description":"Deliverables:\n- Preset specification:\n  - File format: same key=value as config.conf\n  - File location: ~/.config/rano/presets/\u003cname\u003e.conf\n  - Precedence: CLI \u003e preset \u003e config.conf \u003e defaults\n\n- Define built-in presets (embedded in binary):\n  - audit.conf: for security auditing\n  - quiet.conf: minimal output\n  - live.conf: real-time monitoring focus\n  - verbose.conf: maximum detail\n\n- CLI design:\n  - --preset \u003cname\u003e: load named preset\n  - --list-presets: show available presets with descriptions\n  - Multiple --preset flags: merge in order (later wins)\n\n- Error handling:\n  - Unknown preset name: list available and exit\n  - Invalid preset file: warn and continue with partial\n\n- Output: docs/preset-design.md with examples","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-21T05:05:35.453296237Z","created_by":"ubuntu","updated_at":"2026-01-21T10:09:15.257290662Z","closed_at":"2026-01-21T10:09:15.257226671Z","close_reason":"done","dependencies":[{"issue_id":"rust_agent_network_observer-db8","depends_on_id":"rust_agent_network_observer-26d","type":"parent-child","created_at":"2026-01-21T05:05:35.567500528Z","created_by":"ubuntu"}],"comments":[{"id":3,"issue_id":"rust_agent_network_observer-db8","author":"Dicklesworthstone","text":"Added docs/preset-design.md covering format/location, precedence, built-in presets, CLI flags, error handling, and list output.","created_at":"2026-01-21T10:09:07Z"}]}
{"id":"rust_agent_network_observer-fb6","title":"Implement shell status command","description":"Deliverables:\n- StatusArgs struct:\n  - one_line: bool\n  - format: Option\u003cString\u003e\n  - sqlite: PathBuf\n\n- Template expansion:\n  - {active}: active connection count\n  - {total}: total connections\n  - {anthropic}, {openai}, {google}: per-provider counts\n  - {session_name}: current session name\n\n- run_status(args: \u0026StatusArgs) -\u003e Result:\n  - Query latest session from SQLite\n  - Expand template or use default format\n  - Output single line\n\n- Performance: target \u003c50ms execution\n- Caching: optional, skip for simplicity initially\n\n- Unit tests for template expansion\n- Benchmark test for execution time","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-21T05:12:22.02124494Z","created_by":"ubuntu","updated_at":"2026-01-22T06:32:47.909506667Z","closed_at":"2026-01-22T06:32:47.909462093Z","close_reason":"All deliverables complete: StatusArgs struct, template expansion, run_status(), 7 unit tests passing, E2E test created and passing (8ms avg execution), README documentation added.","dependencies":[{"issue_id":"rust_agent_network_observer-fb6","depends_on_id":"rust_agent_network_observer-36b","type":"parent-child","created_at":"2026-01-21T05:12:22.041849373Z","created_by":"ubuntu"}]}
{"id":"rust_agent_network_observer-lr2","title":"Alert output formatting and logging","description":"Deliverables:\n- Alert output to stderr with distinct formatting:\n  [ALERT] 2026-01-20T10:00:00Z | domain-watch | api.unknown.com matched '*unknown*'\n  [ALERT] 2026-01-20T10:00:01Z | max-connections | 101 connections (threshold: 100)\n  [ALERT] 2026-01-20T10:00:02Z | long-duration | connection to api.anthropic.com:443 lasted 45000ms\n\n- Colors:\n  - Alert prefix: bright red background\n  - Alert type: yellow\n  - Details: white\n\n- Bell: if --alert-bell, output \\a after alert line\n\n- JSON mode: alerts as JSON objects on stderr with 'alert': true field\n\n- SQLite: add 'alert' boolean column to events table\n  - Alerts logged with alert=true for later querying\n\n- Summary: include alert count in final summary\n  'Alerts triggered: 5 (3 domain-watch, 2 max-connections)'","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-21T05:00:54.170178182Z","created_by":"ubuntu","updated_at":"2026-01-21T10:25:35.010307656Z","closed_at":"2026-01-21T10:25:35.010262661Z","close_reason":"done","dependencies":[{"issue_id":"rust_agent_network_observer-lr2","depends_on_id":"rust_agent_network_observer-2iu","type":"parent-child","created_at":"2026-01-21T05:00:54.200230439Z","created_by":"ubuntu"},{"issue_id":"rust_agent_network_observer-lr2","depends_on_id":"rust_agent_network_observer-20u","type":"blocks","created_at":"2026-01-21T05:01:10.488350819Z","created_by":"ubuntu"},{"issue_id":"rust_agent_network_observer-lr2","depends_on_id":"rust_agent_network_observer-291","type":"blocks","created_at":"2026-01-21T05:01:10.788894643Z","created_by":"ubuntu"}]}
{"id":"rust_agent_network_observer-n2d","title":"Config validation command","description":"Purpose:\n- Catch configuration errors before runtime\n- Reduce debugging time for 'why isn't my config working'\n- Provide clear feedback on config file issues\n\nUser impact:\n- 'rano config check' validates all config files and reports issues\n- 'rano config show' displays resolved configuration\n- Clear error messages point to exact file:line of problems\n\nFeatures:\n- rano config check: validate config.conf, rano.toml, presets\n- rano config show: display resolved config as key=value\n- rano config show --json: display as JSON for automation\n- rano config paths: show where config files are loaded from\n\nValidation checks:\n- Syntax: valid key=value, valid TOML\n- Known keys: warn on unknown keys (typo detection)\n- Value types: numbers parse, booleans valid\n- Patterns: regex/glob patterns compile\n- Paths: referenced files exist (log_dir, sqlite)\n- Provider config: patterns are valid, mode is merge/replace\n\nExit codes:\n- 0: valid configuration\n- 1: errors found (won't run)\n- 2: warnings only (will run but may have issues)\n\nTesting:\n- Unit tests for each validation check\n- E2E script with invalid configs to verify error messages","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-21T05:06:13.5648513Z","created_by":"ubuntu","updated_at":"2026-01-21T22:27:38.30557649Z","closed_at":"2026-01-21T22:27:38.305506198Z","close_reason":"done","dependencies":[{"issue_id":"rust_agent_network_observer-n2d","depends_on_id":"rust_agent_network_observer-3o1","type":"parent-child","created_at":"2026-01-21T05:06:13.59425301Z","created_by":"ubuntu"}]}
{"id":"rust_agent_network_observer-q9u","title":"Automatic session naming","description":"Purpose:\n- Generate human-readable session names instead of opaque run_ids\n- Enable 'remember that session last Tuesday' conversations\n\nUser impact:\n- Sessions named like 'morning-claude-audit-2026-01-20' instead of '12345-1705512345000'\n- 'rano report --session morning-claude-audit-2026-01-20' for lookup\n- Easier to discuss sessions in team contexts\n\nFeatures:\n- Auto-generate name on session start: {time_of_day}-{primary_provider}-{pattern}-{date}\n- --session-name \u003cname\u003e to override auto-generated name\n- Store in sessions table alongside run_id\n- Report and export accept session name as filter\n\nTime of day mapping:\n- 00:00-06:00: night\n- 06:00-12:00: morning\n- 12:00-18:00: afternoon\n- 18:00-24:00: evening\n\nTesting:\n- Unit tests for name generation\n- E2E script verifying names appear in report\n- Test custom --session-name override","status":"closed","priority":3,"issue_type":"feature","created_at":"2026-01-21T05:07:05.697380819Z","created_by":"ubuntu","updated_at":"2026-01-22T03:31:23.908029005Z","closed_at":"2026-01-22T03:31:23.907986235Z","close_reason":"done","dependencies":[{"issue_id":"rust_agent_network_observer-q9u","depends_on_id":"rust_agent_network_observer-3o1","type":"parent-child","created_at":"2026-01-21T05:07:05.727782292Z","created_by":"ubuntu"}]}
{"id":"rust_agent_network_observer-uj6","title":"Export tests and documentation","description":"Deliverables:\n- Unit tests:\n  - test_csv_escape_quotes() - 'foo\"bar' -\u003e '\"foo\"\"bar\"'\n  - test_csv_escape_comma() - 'foo,bar' wrapped in quotes\n  - test_csv_escape_newline() - embedded newlines wrapped\n  - test_csv_header_generation() - correct field order\n  - test_jsonl_valid_json() - each line parses as JSON\n  - test_export_empty_result() - no crash on empty data\n\n- E2E test script (tests/e2e/export-formats.sh):\n  - Seed SQLite with test data\n  - Export to CSV, validate header and row count\n  - Export to JSONL, validate each line is valid JSON\n  - Test --since/--until filters\n  - Test --provider filter\n  - Test --domain filter\n  - Roundtrip: export CSV, import to new SQLite, compare counts\n  - Log: filter inputs, row counts, sample output\n\n- Documentation:\n  - README section: 'Exporting Data'\n  - Example: 'rano export --format csv --since 24h \u003e daily.csv'\n  - Example: 'rano export --format jsonl | jq -r .domain | sort | uniq -c'\n  - Field reference table","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-21T05:01:52.683237477Z","created_by":"ubuntu","updated_at":"2026-01-21T10:58:11.050454256Z","closed_at":"2026-01-21T10:58:11.050411055Z","close_reason":"done","dependencies":[{"issue_id":"rust_agent_network_observer-uj6","depends_on_id":"rust_agent_network_observer-1vz","type":"parent-child","created_at":"2026-01-21T05:01:52.694725221Z","created_by":"ubuntu"},{"issue_id":"rust_agent_network_observer-uj6","depends_on_id":"rust_agent_network_observer-1gl","type":"blocks","created_at":"2026-01-21T05:01:58.073466211Z","created_by":"ubuntu"}]}
{"id":"rust_agent_network_observer-vb7","title":"Implement ancestry chain reading","description":"Deliverables:\n- read_ancestry(pid) -\u003e Vec\u003c(u32, String)\u003e:\n  - Walk /proc/{pid}/stat to get PPID\n  - Recursively read parent until PPID=0 or PPID=1\n  - Return chain from root to current: [(init_pid, init_comm), ..., (pid, comm)]\n\n- AncestryCache struct:\n  - cache: HashMap\u003cu32, (Vec\u003c(u32, String)\u003e, Instant)\u003e\n  - ttl: Duration (default 30s)\n  - get_or_compute(pid) method with staleness check\n\n- Staleness detection:\n  - If cached entry exists, verify current comm matches cached comm\n  - If mismatch (PID recycled), invalidate and recompute\n\n- format_ancestry(chain) -\u003e String:\n  - Output: 'zsh(123) → tmux(456) → claude(789)'\n  - Truncate if \u003e5 levels: '... → parent(456) → claude(789)'\n  - Handle single-level: 'claude(789)'\n\n- Integration:\n  - Add ancestry_cache to main state\n  - Lookup ancestry when --show-ancestry enabled\n  - Pass ancestry to event formatting","design":"Implementation approach:\n- Reuse existing read_ppid() from descendant tracking\n- Stack-based iteration (not recursion) to avoid stack overflow\n- Stop at PPID=0 (kernel) or PPID=1 (init/systemd)\n- Reverse to get root→leaf order\n\nPerformance considerations:\n- Cache is essential - ancestry changes rarely\n- 30s TTL is reasonable (processes don't typically reparent)\n- Staleness check: comm is sufficient (PID reuse with same comm is rare)\n- Memory: ~100 bytes per cached entry, max ~1000 tracked PIDs = 100KB\n\nEdge cases:\n- Process exits during walk: return partial chain with '?' for missing\n- Zombie process: use comm from cmdline fallback\n- Init containers: stop at container init, not host init","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-21T05:02:49.224824805Z","created_by":"ubuntu","updated_at":"2026-01-21T09:11:08.313186516Z","closed_at":"2026-01-21T09:11:08.313142694Z","close_reason":"done","dependencies":[{"issue_id":"rust_agent_network_observer-vb7","depends_on_id":"rust_agent_network_observer-1ju","type":"parent-child","created_at":"2026-01-21T05:02:49.294596381Z","created_by":"ubuntu"}],"comments":[{"id":4,"issue_id":"rust_agent_network_observer-vb7","author":"Dicklesworthstone","text":"Implemented ancestry chain reading + cache in src/main.rs (read_ancestry, AncestryCache w/ TTL + PID reuse check, format_ancestry truncation). Integrated optional ancestry output into connect/close event formatting (pretty + JSON) gated by args.show_ancestry. Added show_ancestry field in MonitorArgs. cargo test -q passed.","created_at":"2026-01-21T09:10:58Z"}]}
